<html>

<head>
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-HQ9863ZP35"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());

		gtag('config', 'G-HQ9863ZP35');
	</script>
	<title>Capillaries blog</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
		integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
		crossorigin="anonymous"></script>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<body>
	<nav class="navbar navbar-expand-lg navbar-light bg-light">
		<div class="container-fluid">
			<a class="navbar-brand" href="#"><img src="../i/logo.svg" alt="Capillaries logo"
					style="width:20px;margin-right:10px;margin-bottom:5px;">Capillaries: notes</a>
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse"
				data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
				aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav ms-auto mb-2 mb-lg-0">
					<li class="nav-item">
						<a class="nav-link" aria-current="page" href="../index.html">Home</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" aria-current="page"
							href="https://github.com/capillariesio/capillaries">Source code</a>
					</li>
				</ul>
			</div>
		</div>
	</nav>

	<div class="container">

		<!-- Insert new blog post here -->

		<div class="row mt-3">
			<div class="col-3">
				<a href="./2025-08-05-declarative/index.html"><img
						src="./2025-08-05-declarative/i/2025-08-05-imperative-02.png" width="100%" alt=""></a>
			</div>
			<div class="col-9">
				<h4>2025-08-05</h4>
				<h3>Capillaries: imperative or declarative?</h3>
				<p>
					Declarative Pipelines are expected to become part of Apache Spark 4.1.0.</p>
				<p>
					<i>
						Building upon the strong foundation of Apache Spark, we are excited to announce a new addition
						to open
						source: We’re donating Declarative Pipelines - a proven standard for building reliable, scalable
						data
						pipelines - to Apache Spark. This contribution extends Apache Spark’s declarative power from
						individual
						queries to full pipelines - allowing users to define what their pipeline should do, and letting
						Apache Spark
						figure out how to do it. The design draws on years of observing real-world Apache Spark
						workloads, codifying
						what we’ve learned into a declarative API that covers the most common patterns - including both
						batch and
						streaming flows.
					</i>
				</p>
				<p>
					Capillaries: declarative from the day one. <a href="./2025-08-05-declarative/index.html">Read more...</a>
				</p>
			</div>
		</div>

		<div class="row mt-3">
			<div class="col-3">
				<a href="./2025-07-17-tf/index.html"><img src="./2025-07-17-tf/i/many-old-pcs.png" width="100%"
						alt=""></a>
			</div>
			<div class="col-9">
				<h4>2025-07-17</h4>
				<h3>Capillaries: Terraform deployment, scalability updates, and thread parameters</h3>
				<p>Scalability numbers. The <a
						href="https://github.com/capillariesio/capillaries-deploy">capillaries-deploy</a> project has
					been put on hold, <a
						href="https://github.com/capillariesio/capillaries/tree/main/deploy/tf/cassandra_cluster">Terraform</a>
					is now the preferred tool for testing Capillaries deployments.
					Another round of scalability testing was performed. As before, we use setups where:
				</p>
				<ul>
					<li>number_of_daemons = number_of_cassandra_nodes</li>
					<li>Cassandra nodes are x4 more powerful than Capillaries instances</li>
				</ul>
				<p>Here is what has changed since the last round: <a href="./2025-07-17-tf/index.html">Read more...</a>
				</p>
			</div>
		</div>

		<div class="row mt-3">
			<div class="col-3">
				<a href="./2025-02-25-global-affairs/index.html"><img
						src="./2025-02-25-global-affairs/i/global-affairs-beaver.jpg" width="100%" alt=""></a>
			</div>
			<div class="col-9">
				<h4>2025-02-25</h4>
				<h3>Capillaries: analyzing $66B allocated by Global Affairs Canada (1996–2047)</h3>
				<p>
					The <a href="https://w05.international.gc.ca/projectbrowser-banqueprojets/filter-filtre">Global
						Affairs Canada website</a>
					provides access to some information about the "projects" it funds with taxpayers'
					money. As of February 2025, the site lists details about 7769 "projects", including:
				</p>
				<ul>
					<li>start and end date</li>
					<li>total amount allocated</li>
					<li>distribution by country/region</li>
					<li>distribution by sector</li>
				</ul>
				<p>
					The funds allocated for each "project" are channeled through a "partner" organization. <a
						href="./2025-02-25-global-affairs/index.html">Read more...</a>
				</p>
			</div>
		</div>

		<div class="row mt-3">
			<div class="col-3">
				<a href="./2024-08-10-scaleup-scaleout/index.html"><img
						src="./2024-08-10-scaleup-scaleout/i/670x670-scaleup-scaleout.png" width="100%" alt=""></a>
			</div>
			<div class="col-9">
				<h4>2024-08-10</h4>
				<h3>Capillaries: scale up vs scale out</h3>
				<p>
					This blog post continues the scalability discussion <a
						href="./2023-11-15-portfolio-scale/index.html">started earlier</a>. There are a couple of
					technical changes this time:
				<ul>
					<li>Cassandra nodes use local NVME drives for storage (RAM drives were used in past experiments)
					</li>
					<li>Daemon instances are now x4 less powerful than Cassandra nodes (previously, they were 2x less
						powerful)</li>
					<li>Graviton-based instances are used (previously, AMD instances were used)</li>
				</ul>
				This time, the focus was on trying to scale up (use more powerful instances) and scale out (use more
				instances) the deployment and compare the results. <a
					href="./2024-08-10-scaleup-scaleout/index.html">Read more...</a>
				</p>
			</div>
		</div>

		<div class="row mt-3">
			<div class="col-3">
				<a href="./2024-03-10-fannie-mae/index.html"><img src="./2024-03-10-fannie-mae/i/standard-and-poors.jpg"
						width="100%" alt=""></a>
			</div>
			<div class="col-9">
				<h4>2024-03-10</h4>
				<h3>Capillaries: analyze how Fannie Mae transfers credit risk from taxpayers to investors - mortgage by
					mortgage, payment by payment</h3>
				<p>
					Since 2013, following the "Big Short," Fannie Mae has been issuing mortgage-backed bonds as part of
					its
					"Connecticut Avenue Securities" (CAS) program. This typically occurs several times a year in the
					form of so-called "deals."
					For each deal, Fannie Mae selects a pool of qualified mortgage loans and issues bonds that enable
					investors to receive a portion
					of the interest payments from the mortgages in that pool. In return, investors are exposed to the
					risks associated with those mortgages.
				</p>
				<p>
					For each deal, Fannie Mae publishes data about the mortgage pool.
					The data comes in the form of a dataset that can be downloaded for free from Fannie Mae's website.
					<a href="./2024-03-10-fannie-mae/index.html">Read more...</a>
				</p>
				</p>
			</div>
		</div>

		<div class="row mt-3">
			<div class="col-3">
				<a href="./2023-11-15-portfolio-scale/index.html"><img
						src="./2023-11-15-portfolio-scale/i/ark-scale.jpg" width="100%" alt=""></a>
			</div>
			<div class="col-9">
				<h4>2023-11-15</h4>
				<h3>Capillaries: ARK portfolio performance calculation at (slightly bigger) scale</h3>
				<p>
					At the end of the day, using any piece of technology is about saving money.
					This post attempts to estimate the potential costs of implementing a Capillaries-based solution for
					portfolio performance calculation.
					It gives a realistic estimate of the time and money an organization may need to allocate to produce
					portfolio performance results from raw data files. <a
						href="./2023-11-15-portfolio-scale/index.html">Read more...</a>
				</p>
			</div>
		</div>

		<div class="row mt-3">
			<div class="col-3">
				<a href="./2023-04-08-portfolio/index.html"><img src="./2023-04-08-portfolio/i/ark.jpg" width="100%"
						alt=""></a>
			</div>
			<div class="col-9">
				<h4>2023-04-08</h4>
				<h3>Use Capillaries to calculate ARK portfolio performance</h3>
				<p>Recently, a new Capillaries integration test was added: Portfolio performance calculation.
					It mimics the process performed by an investment bank at the end of each quarter or year: for each
					individual portfolio, combined return rate is calculated for a specific period.
					This test uses data for six portfolios maintained by ARK, and calculates yearly performance for the
					whole portfolio and for each sector using time-weighted annualized return (TWR) formula.
				</p>
				<p>
					What's so cool about it? The test performs calculations for six portfolios only, but the process can
					be easily scaled out to tens or hundreds of thousands of portfolios. And this is exactly the
					challenge
					that investment bank IT departments are facing on a regular basis: provide each client (there may be
					hundreds
					of thousands of them) with a personalized rate of return, and do that, say, overnight. <a
						href="./2023-04-08-portfolio/index.html">Read more...</a>
				</p>
			</div>
		</div>

		<div class="row mt-3">
			<div class="col-3">
				<a href="./2023-02-20-ui/index.html"><img src="./2023-02-20-ui/i/600x600-ui-like-joke.png" width="100%"
						alt=""></a>
			</div>
			<div class="col-9">
				<h4>2023-02-20</h4>
				<h3>First look at Capillaries UI</h3>
				<p>
					Below are two scraped snapshots of Capillaries UI that give the idea about the state of the test
					environment.
					Click any of the screenshots and navigate through status screens - all blue elements are clickable,
					buttons are disabled (button tooltips are working though).
				</p>
				<p>
					Second snapshot also contains status information about other integration test runs: lookup_quicktest
					(smaller number of orders and order items),
					py_calc_quicktest (performs Python formula calculations) and tag_and_denormalize_quicktest
					(tags data records using regular expressions and calculates tag totals). <a
						href="./2023-02-20-ui/index.html">Read more...</a>
				</p>
			</div>
		</div>


		<div class="footer">
			<p>&copy;
				<script type="text/javascript">document.write("2022-" + new Date().getFullYear());</script>
				capillaries.io
			</p>
		</div>

	</div>
</body>

</html>