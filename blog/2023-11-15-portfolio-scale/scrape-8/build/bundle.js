var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function s(){return Object.create(null)}function r(t){t.forEach(n)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let l,a;function c(t,e){return l||(l=document.createElement("a")),l.href=e,t===l.href}function u(e,...n){if(null==e)return t;const s=e.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}function f(t){let e;return u(t,(t=>e=t))(),e}function d(t,e,n){t.$$.on_destroy.push(u(e,n))}function p(t,e,n,s){if(t){const r=h(t,e,n,s);return t[0](r)}}function h(t,n,s,r){return t[1]&&r?e(s.ctx.slice(),t[1](r(n))):s.ctx}function m(t,e,n,s){if(t[2]&&s){const r=t[2](s(n));if(void 0===e.dirty)return r;if("object"==typeof r){const t=[],n=Math.max(e.dirty.length,r.length);for(let s=0;s<n;s+=1)t[s]=e.dirty[s]|r[s];return t}return e.dirty|r}return e.dirty}function g(t,e,n,s,r,o){if(r){const i=h(e,n,s,o);t.p(i,r)}}function $(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function _(t,e,n){return t.set(n),e}function v(t,e){t.appendChild(e)}function y(t,e,n){t.insertBefore(e,n||null)}function k(t){t.parentNode&&t.parentNode.removeChild(t)}function b(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function w(t){return document.createElement(t)}function x(t){return document.createTextNode(t)}function S(){return x(" ")}function M(){return x("")}function T(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function O(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function E(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function j(t,e){t.value=null==e?"":e}function D(t,e,n,s){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}class L{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e,n=null){var s;this.e||(this.is_svg?this.e=(s=e.nodeName,document.createElementNS("http://www.w3.org/2000/svg",s)):this.e=w(e.nodeName),this.t=e,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)y(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(k)}}function Y(t,e){return new t(e)}function H(t){a=t}function C(){if(!a)throw new Error("Function called outside component initialization");return a}function I(t){C().$$.on_mount.push(t)}function N(t){C().$$.after_update.push(t)}function R(t){C().$$.on_destroy.push(t)}function q(){const t=C();return(e,n,{cancelable:s=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=function(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,s,e),r}(e,n,{cancelable:s});return r.slice().forEach((e=>{e.call(t,o)})),!o.defaultPrevented}return!0}}function A(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const U=[],Z=[],B=[],W=[],z=Promise.resolve();let G=!1;function F(){G||(G=!0,z.then(X))}function K(t){B.push(t)}function P(t){W.push(t)}const J=new Set;let V=0;function X(){const t=a;do{for(;V<U.length;){const t=U[V];V++,H(t),Q(t.$$)}for(H(null),U.length=0,V=0;Z.length;)Z.pop()();for(let t=0;t<B.length;t+=1){const e=B[t];J.has(e)||(J.add(e),e())}B.length=0}while(U.length);for(;W.length;)W.pop()();G=!1,J.clear(),H(t)}function Q(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(K)}}const tt=new Set;let et;function nt(){et={r:0,c:[],p:et}}function st(){et.r||r(et.c),et=et.p}function rt(t,e){t&&t.i&&(tt.delete(t),t.i(e))}function ot(t,e,n,s){if(t&&t.o){if(tt.has(t))return;tt.add(t),et.c.push((()=>{tt.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}else s&&s()}function it(t,e){const n=e.token={};function s(t,s,r,o){if(e.token!==n)return;e.resolved=o;let i=e.ctx;void 0!==r&&(i=i.slice(),i[r]=o);const l=t&&(e.current=t)(i);let a=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==s&&t&&(nt(),ot(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),st())})):e.block.d(1),l.c(),rt(l,1),l.m(e.mount(),e.anchor),a=!0),e.block=l,e.blocks&&(e.blocks[s]=l),a&&X()}if((r=t)&&"object"==typeof r&&"function"==typeof r.then){const n=C();if(t.then((t=>{H(n),s(e.then,1,e.value,t),H(null)}),(t=>{if(H(n),s(e.catch,2,e.error,t),H(null),!e.hasCatch)throw t})),e.current!==e.pending)return s(e.pending,0),!0}else{if(e.current!==e.then)return s(e.then,1,e.value,t),!0;e.resolved=t}var r}function lt(t,e){ot(t,1,1,(()=>{e.delete(t.key)}))}function at(t,e){const n={},s={},r={$$scope:1};let o=t.length;for(;o--;){const i=t[o],l=e[o];if(l){for(const t in i)t in l||(s[t]=1);for(const t in l)r[t]||(n[t]=l[t],r[t]=1);t[o]=l}else for(const t in i)r[t]=1}for(const t in s)t in n||(n[t]=void 0);return n}function ct(t){return"object"==typeof t&&null!==t?t:{}}function ut(t,e,n){const s=t.$$.props[e];void 0!==s&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function ft(t){t&&t.c()}function dt(t,e,s,i){const{fragment:l,after_update:a}=t.$$;l&&l.m(e,s),i||K((()=>{const e=t.$$.on_mount.map(n).filter(o);t.$$.on_destroy?t.$$.on_destroy.push(...e):r(e),t.$$.on_mount=[]})),a.forEach(K)}function pt(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ht(e,n,o,i,l,c,u,f=[-1]){const d=a;H(e);const p=e.$$={fragment:null,ctx:[],props:c,update:t,not_equal:l,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:s(),dirty:f,skip_bound:!1,root:n.target||d.$$.root};u&&u(p.root);let h=!1;if(p.ctx=o?o(e,n.props||{},((t,n,...s)=>{const r=s.length?s[0]:n;return p.ctx&&l(p.ctx[t],p.ctx[t]=r)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](r),h&&function(t,e){-1===t.$$.dirty[0]&&(U.push(t),F(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],p.update(),h=!0,r(p.before_update),p.fragment=!!i&&i(p.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);p.fragment&&p.fragment.l(t),t.forEach(k)}else p.fragment&&p.fragment.c();n.intro&&rt(e.$$.fragment),dt(e,n.target,n.anchor,n.customElement),X()}H(d)}class mt{$destroy(){pt(this,1),this.$destroy=t}$on(e,n){if(!o(n))return t;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const t=s.indexOf(n);-1!==t&&s.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const gt=[];function $t(t,e){return{subscribe:_t(t,e).subscribe}}function _t(e,n=t){let s;const r=new Set;function o(t){if(i(e,t)&&(e=t,s)){const t=!gt.length;for(const t of r)t[1](),gt.push(t,e);if(t){for(let t=0;t<gt.length;t+=2)gt[t][0](gt[t+1]);gt.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(i,l=t){const a=[i,l];return r.add(a),1===r.size&&(s=n(o)||t),i(e),()=>{r.delete(a),0===r.size&&(s(),s=null)}}}}function vt(e,n,s){const i=!Array.isArray(e),l=i?[e]:e,a=n.length<2;return $t(s,(e=>{let s=!1;const c=[];let f=0,d=t;const p=()=>{if(f)return;d();const s=n(i?c[0]:c,e);a?e(s):d=o(s)?s:t},h=l.map(((t,e)=>u(t,(t=>{c[e]=t,f&=~(1<<e),s&&p()}),(()=>{f|=1<<e}))));return s=!0,p(),function(){r(h),d()}}))}function yt(t){let n,s,r;const o=[t[2]];var i=t[0];function l(t){let n={};for(let t=0;t<o.length;t+=1)n=e(n,o[t]);return{props:n}}return i&&(n=Y(i,l()),n.$on("routeEvent",t[7])),{c(){n&&ft(n.$$.fragment),s=M()},m(t,e){n&&dt(n,t,e),y(t,s,e),r=!0},p(t,e){const r=4&e?at(o,[ct(t[2])]):{};if(i!==(i=t[0])){if(n){nt();const t=n;ot(t.$$.fragment,1,0,(()=>{pt(t,1)})),st()}i?(n=Y(i,l()),n.$on("routeEvent",t[7]),ft(n.$$.fragment),rt(n.$$.fragment,1),dt(n,s.parentNode,s)):n=null}else i&&n.$set(r)},i(t){r||(n&&rt(n.$$.fragment,t),r=!0)},o(t){n&&ot(n.$$.fragment,t),r=!1},d(t){t&&k(s),n&&pt(n,t)}}}function kt(t){let n,s,r;const o=[{params:t[1]},t[2]];var i=t[0];function l(t){let n={};for(let t=0;t<o.length;t+=1)n=e(n,o[t]);return{props:n}}return i&&(n=Y(i,l()),n.$on("routeEvent",t[6])),{c(){n&&ft(n.$$.fragment),s=M()},m(t,e){n&&dt(n,t,e),y(t,s,e),r=!0},p(t,e){const r=6&e?at(o,[2&e&&{params:t[1]},4&e&&ct(t[2])]):{};if(i!==(i=t[0])){if(n){nt();const t=n;ot(t.$$.fragment,1,0,(()=>{pt(t,1)})),st()}i?(n=Y(i,l()),n.$on("routeEvent",t[6]),ft(n.$$.fragment),rt(n.$$.fragment,1),dt(n,s.parentNode,s)):n=null}else i&&n.$set(r)},i(t){r||(n&&rt(n.$$.fragment,t),r=!0)},o(t){n&&ot(n.$$.fragment,t),r=!1},d(t){t&&k(s),n&&pt(n,t)}}}function bt(t){let e,n,s,r;const o=[kt,yt],i=[];function l(t,e){return t[1]?0:1}return e=l(t),n=i[e]=o[e](t),{c(){n.c(),s=M()},m(t,n){i[e].m(t,n),y(t,s,n),r=!0},p(t,[r]){let a=e;e=l(t),e===a?i[e].p(t,r):(nt(),ot(i[a],1,1,(()=>{i[a]=null})),st(),n=i[e],n?n.p(t,r):(n=i[e]=o[e](t),n.c()),rt(n,1),n.m(s.parentNode,s))},i(t){r||(rt(n),r=!0)},o(t){ot(n),r=!1},d(t){i[e].d(t),t&&k(s)}}}function wt(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let s="";return n>-1&&(s=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:s}}const xt=$t(null,(function(t){t(wt());const e=()=>{t(wt())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}));vt(xt,(t=>t.location)),vt(xt,(t=>t.querystring));const St=_t(void 0);function Mt(t,e,n){let{routes:s={}}=e,{prefix:r=""}=e,{restoreScrollState:o=!1}=e;class i{constructor(t,e){if(!e||"function"!=typeof e&&("object"!=typeof e||!0!==e._sveltesparouter))throw Error("Invalid component object");if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:n,keys:s}=function(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,s,r,o,i=[],l="",a=t.split("/");for(a[0]||a.shift();r=a.shift();)"*"===(n=r[0])?(i.push("wild"),l+="/(.*)"):":"===n?(s=r.indexOf("?",1),o=r.indexOf(".",1),i.push(r.substring(1,~s?s:~o?o:r.length)),l+=~s&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(l+=(~s?"?":"")+"\\"+r.substring(o))):l+="/"+r;return{keys:i,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}(t);this.path=t,"object"==typeof e&&!0===e._sveltesparouter?(this.component=e.component,this.conditions=e.conditions||[],this.userData=e.userData,this.props=e.props||{}):(this.component=()=>Promise.resolve(e),this.conditions=[],this.props={}),this._pattern=n,this._keys=s}match(t){if(r)if("string"==typeof r){if(!t.startsWith(r))return null;t=t.substr(r.length)||"/"}else if(r instanceof RegExp){const e=t.match(r);if(!e||!e[0])return null;t=t.substr(e[0].length)||"/"}const e=this._pattern.exec(t);if(null===e)return null;if(!1===this._keys)return e;const n={};let s=0;for(;s<this._keys.length;){try{n[this._keys[s]]=decodeURIComponent(e[s+1]||"")||null}catch(t){n[this._keys[s]]=null}s++}return n}async checkConditions(t){for(let e=0;e<this.conditions.length;e++)if(!await this.conditions[e](t))return!1;return!0}}const l=[];s instanceof Map?s.forEach(((t,e)=>{l.push(new i(e,t))})):Object.keys(s).forEach((t=>{l.push(new i(t,s[t]))}));let a=null,c=null,u={};const f=q();async function d(t,e){await(F(),z),f(t,e)}let p=null,h=null;o&&(h=t=>{p=t.state&&(t.state.__svelte_spa_router_scrollY||t.state.__svelte_spa_router_scrollX)?t.state:null},window.addEventListener("popstate",h),N((()=>{var t;(t=p)?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)})));let m=null,g=null;const $=xt.subscribe((async t=>{m=t;let e=0;for(;e<l.length;){const s=l[e].match(t.location);if(!s){e++;continue}const r={route:l[e].path,location:t.location,querystring:t.querystring,userData:l[e].userData,params:s&&"object"==typeof s&&Object.keys(s).length?s:null};if(!await l[e].checkConditions(r))return n(0,a=null),g=null,void d("conditionsFailed",r);d("routeLoading",Object.assign({},r));const o=l[e].component;if(g!=o){o.loading?(n(0,a=o.loading),g=o,n(1,c=o.loadingParams),n(2,u={}),d("routeLoaded",Object.assign({},r,{component:a,name:a.name,params:c}))):(n(0,a=null),g=null);const e=await o();if(t!=m)return;n(0,a=e&&e.default||e),g=o}return s&&"object"==typeof s&&Object.keys(s).length?n(1,c=s):n(1,c=null),n(2,u=l[e].props),void d("routeLoaded",Object.assign({},r,{component:a,name:a.name,params:c})).then((()=>{St.set(c)}))}n(0,a=null),g=null,St.set(void 0)}));return R((()=>{$(),h&&window.removeEventListener("popstate",h)})),t.$$set=t=>{"routes"in t&&n(3,s=t.routes),"prefix"in t&&n(4,r=t.prefix),"restoreScrollState"in t&&n(5,o=t.restoreScrollState)},t.$$.update=()=>{32&t.$$.dirty&&(history.scrollRestoration=o?"manual":"auto")},[a,c,u,s,r,o,function(e){A.call(this,t,e)},function(e){A.call(this,t,e)}]}class Tt extends mt{constructor(t){super(),ht(this,t,Mt,bt,i,{routes:3,prefix:4,restoreScrollState:5})}}const Ot=_t(!1),Et=_t(null),jt=_t([]),Dt=_t(null);function Lt(t=1){var e,n;const s=f(jt).length,r=f(jt)[s-1];return!f(Et)&&((!(null===(e=null==r?void 0:r.callbacks)||void 0===e?void 0:e.onBeforeClose)||!1!==(null===(n=null==r?void 0:r.callbacks)||void 0===n?void 0:n.onBeforeClose()))&&(f(Ot)&&s>0&&Et.set(!0),Ot.set(!1),Dt.set("pop"),function(t=1){jt.update((e=>e.slice(0,Math.max(0,e.length-t))))}(t),!0))}function Yt(){return Lt(1)}function Ht(t,e,n){f(Et)||(Dt.set("push"),f(Ot)&&f(jt).length&&Et.set(!0),Ot.set(!1),(null==n?void 0:n.replace)?jt.update((n=>[...n.slice(0,n.length-1),{component:t,props:e}])):jt.update((n=>[...n,{component:t,props:e}])))}function Ct(t,e,n){const s=t.slice();return s[9]=e[n],s[11]=n,s}const It=t=>({}),Nt=t=>({}),Rt=t=>({}),qt=t=>({});function At(t){let e;const n=t[4].backdrop,s=p(n,t,t[3],qt);return{c(){s&&s.c()},m(t,n){s&&s.m(t,n),e=!0},p(t,r){s&&s.p&&(!e||8&r)&&g(s,n,t,t[3],e?m(n,t[3],r,Rt):$(t[3]),qt)},i(t){e||(rt(s,t),e=!0)},o(t){ot(s,t),e=!1},d(t){s&&s.d(t)}}}function Ut(t){let n,s,r;const o=[{isOpen:t[11]===t[0].length-1&&!t[1]},t[9].props];var i=t[9].component;function l(t){let n={};for(let t=0;t<o.length;t+=1)n=e(n,o[t]);return{props:n}}return i&&(n=Y(i,l()),n.$on("introstart",t[7]),n.$on("outroend",t[8])),{c(){n&&ft(n.$$.fragment),s=M()},m(t,e){n&&dt(n,t,e),y(t,s,e),r=!0},p(t,e){const r=3&e?at(o,[{isOpen:t[11]===t[0].length-1&&!t[1]},1&e&&ct(t[9].props)]):{};if(i!==(i=t[9].component)){if(n){nt();const t=n;ot(t.$$.fragment,1,0,(()=>{pt(t,1)})),st()}i?(n=Y(i,l()),n.$on("introstart",t[7]),n.$on("outroend",t[8]),ft(n.$$.fragment),rt(n.$$.fragment,1),dt(n,s.parentNode,s)):n=null}else i&&n.$set(r)},i(t){r||(n&&rt(n.$$.fragment,t),r=!0)},o(t){n&&ot(n.$$.fragment,t),r=!1},d(t){t&&k(s),n&&pt(n,t)}}}function Zt(t){let e,n,s,r={ctx:t,current:null,token:null,hasCatch:!1,pending:zt,then:Wt,catch:Bt,value:12,blocks:[,,,]};return it(n=Pt(t[9].component),r),{c(){e=M(),r.block.c()},m(t,n){y(t,e,n),r.block.m(t,r.anchor=n),r.mount=()=>e.parentNode,r.anchor=e,s=!0},p(e,s){t=e,r.ctx=t,1&s&&n!==(n=Pt(t[9].component))&&it(n,r)||function(t,e,n){const s=e.slice(),{resolved:r}=t;t.current===t.then&&(s[t.value]=r),t.current===t.catch&&(s[t.error]=r),t.block.p(s,n)}(r,t,s)},i(t){s||(rt(r.block),s=!0)},o(t){for(let t=0;t<3;t+=1){ot(r.blocks[t])}s=!1},d(t){t&&k(e),r.block.d(t),r.token=null,r=null}}}function Bt(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function Wt(t){let n,s,r;const o=[{isOpen:t[11]===t[0].length-1&&!t[1]},t[9].props];var i=t[12];function l(t){let n={};for(let t=0;t<o.length;t+=1)n=e(n,o[t]);return{props:n}}return i&&(n=Y(i,l()),n.$on("introstart",t[5]),n.$on("outroend",t[6])),{c(){n&&ft(n.$$.fragment),s=S()},m(t,e){n&&dt(n,t,e),y(t,s,e),r=!0},p(t,e){const r=3&e?at(o,[{isOpen:t[11]===t[0].length-1&&!t[1]},1&e&&ct(t[9].props)]):{};if(i!==(i=t[12])){if(n){nt();const t=n;ot(t.$$.fragment,1,0,(()=>{pt(t,1)})),st()}i?(n=Y(i,l()),n.$on("introstart",t[5]),n.$on("outroend",t[6]),ft(n.$$.fragment),rt(n.$$.fragment,1),dt(n,s.parentNode,s)):n=null}else i&&n.$set(r)},i(t){r||(n&&rt(n.$$.fragment,t),r=!0)},o(t){n&&ot(n.$$.fragment,t),r=!1},d(t){n&&pt(n,t),t&&k(s)}}}function zt(t){let e,n;const s=t[4].loading,r=p(s,t,t[3],Nt);return{c(){r&&r.c(),e=S()},m(t,s){r&&r.m(t,s),y(t,e,s),n=!0},p(t,e){r&&r.p&&(!n||8&e)&&g(r,s,t,t[3],n?m(s,t[3],e,It):$(t[3]),Nt)},i(t){n||(rt(r,t),n=!0)},o(t){ot(r,t),n=!1},d(t){r&&r.d(t),t&&k(e)}}}function Gt(t,e){let n,s,r,o,i,l;const a=[Zt,Ut],c=[];function u(t,e){var n;return 1&e&&(s=null),null==s&&(n=t[9].component,s=!(void 0!==n.prototype)),s?0:1}return r=u(e,-1),o=c[r]=a[r](e),{key:t,first:null,c(){n=M(),o.c(),i=M(),this.first=n},m(t,e){y(t,n,e),c[r].m(t,e),y(t,i,e),l=!0},p(t,n){let s=r;r=u(e=t,n),r===s?c[r].p(e,n):(nt(),ot(c[s],1,1,(()=>{c[s]=null})),st(),o=c[r],o?o.p(e,n):(o=c[r]=a[r](e),o.c()),rt(o,1),o.m(i.parentNode,i))},i(t){l||(rt(o),l=!0)},o(t){ot(o),l=!1},d(t){t&&k(n),c[r].d(t),t&&k(i)}}}function Ft(t){let e,n,s=[],r=new Map,o=t[0];const i=t=>t[11];for(let e=0;e<o.length;e+=1){let n=Ct(t,o,e),l=i(n);r.set(l,s[e]=Gt(l,n))}return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=M()},m(t,r){for(let e=0;e<s.length;e+=1)s[e].m(t,r);y(t,e,r),n=!0},p(t,n){15&n&&(o=t[0],nt(),s=function(t,e,n,s,r,o,i,l,a,c,u,f){let d=t.length,p=o.length,h=d;const m={};for(;h--;)m[t[h].key]=h;const g=[],$=new Map,_=new Map;for(h=p;h--;){const t=f(r,o,h),l=n(t);let a=i.get(l);a?s&&a.p(t,e):(a=c(l,t),a.c()),$.set(l,g[h]=a),l in m&&_.set(l,Math.abs(h-m[l]))}const v=new Set,y=new Set;function k(t){rt(t,1),t.m(l,u),i.set(t.key,t),u=t.first,p--}for(;d&&p;){const e=g[p-1],n=t[d-1],s=e.key,r=n.key;e===n?(u=e.first,d--,p--):$.has(r)?!i.has(s)||v.has(s)?k(e):y.has(r)?d--:_.get(s)>_.get(r)?(y.add(s),k(e)):(v.add(r),d--):(a(n,i),d--)}for(;d--;){const e=t[d];$.has(e.key)||a(e,i)}for(;p;)k(g[p-1]);return g}(s,n,i,1,t,o,r,e.parentNode,lt,Gt,e,Ct),st())},i(t){if(!n){for(let t=0;t<o.length;t+=1)rt(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)ot(s[t]);n=!1},d(t){for(let e=0;e<s.length;e+=1)s[e].d(t);t&&k(e)}}}function Kt(t){let e,n,s=t[0].length>0&&At(t);const r=t[4].default,o=p(r,t,t[3],null),i=o||Ft(t);return{c(){s&&s.c(),e=S(),i&&i.c()},m(t,r){s&&s.m(t,r),y(t,e,r),i&&i.m(t,r),n=!0},p(t,[l]){t[0].length>0?s?(s.p(t,l),1&l&&rt(s,1)):(s=At(t),s.c(),rt(s,1),s.m(e.parentNode,e)):s&&(nt(),ot(s,1,1,(()=>{s=null})),st()),o?o.p&&(!n||8&l)&&g(o,r,t,t[3],n?m(r,t[3],l,null):$(t[3]),null):i&&i.p&&(!n||15&l)&&i.p(t,n?l:-1)},i(t){n||(rt(s),rt(i,t),n=!0)},o(t){ot(s),ot(i,t),n=!1},d(t){s&&s.d(t),t&&k(e),i&&i.d(t)}}}async function Pt(t){return t().then((t=>t.default))}function Jt(t,e,n){let s,r,o;d(t,jt,(t=>n(0,s=t))),d(t,Et,(t=>n(1,r=t))),d(t,Ot,(t=>n(2,o=t)));let{$$slots:i={},$$scope:l}=e;return t.$$set=t=>{"$$scope"in t&&n(3,l=t.$$scope)},[s,r,o,l,i,()=>{_(Ot,o=!0,o)},()=>{_(Et,r=!1,r)},()=>{_(Ot,o=!0,o)},()=>{_(Et,r=!1,r)}]}class Vt extends mt{constructor(t){super(),ht(this,t,Jt,Kt,i,{})}}function Xt(t,e,n){const s=t.slice();return s[1]=e[n],s[3]=n,s}function Qt(t){let e,n=t[1].title+"";return{c(){e=x(n)},m(t,n){y(t,e,n)},p(t,s){1&s&&n!==(n=t[1].title+"")&&E(e,n)},d(t){t&&k(e)}}}function te(t){let e,n,s,r=t[1].title+"";return{c(){e=w("a"),n=x(r),O(e,"href",s=t[1].link)},m(t,s){y(t,e,s),v(e,n)},p(t,o){1&o&&r!==(r=t[1].title+"")&&E(n,r),1&o&&s!==(s=t[1].link)&&O(e,"href",s)},d(t){t&&k(e)}}}function ee(t){let e;return{c(){e=x("  >  ")},m(t,n){y(t,e,n)},d(t){t&&k(e)}}}function ne(t){let e,n;function s(t,e){return t[1].link?te:Qt}let r=s(t),o=r(t),i=t[3]<t[0].length-1&&ee();return{c(){o.c(),e=S(),i&&i.c(),n=M()},m(t,s){o.m(t,s),y(t,e,s),i&&i.m(t,s),y(t,n,s)},p(t,l){r===(r=s(t))&&o?o.p(t,l):(o.d(1),o=r(t),o&&(o.c(),o.m(e.parentNode,e))),t[3]<t[0].length-1?i||(i=ee(),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d(t){o.d(t),t&&k(e),i&&i.d(t),t&&k(n)}}}function se(e){let n,s,r,o,i=e[0],l=[];for(let t=0;t<i.length;t+=1)l[t]=ne(Xt(e,i,t));return{c(){n=w("div"),s=w("img"),o=S();for(let t=0;t<l.length;t+=1)l[t].c();c(s.src,r="i/logo.svg")||O(s,"src","i/logo.svg"),D(s,"width","20px"),D(s,"padding-right","15px"),D(s,"padding-bottom","10px"),O(s,"alt",""),O(s,"title","Capillaries-UI"),O(n,"class","svelte-11u0ose")},m(t,e){y(t,n,e),v(n,s),v(n,o);for(let t=0;t<l.length;t+=1)l[t].m(n,null)},p(t,[e]){if(1&e){let s;for(i=t[0],s=0;s<i.length;s+=1){const r=Xt(t,i,s);l[s]?l[s].p(r,e):(l[s]=ne(r),l[s].c(),l[s].m(n,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=i.length}},i:t,o:t,d(t){t&&k(n),b(l,t)}}}function re(t,e,n){let{pathElements:s=[{title:"Empty breadcrumbs"}]}=e;return t.$$set=t=>{"pathElements"in t&&n(0,s=t.pathElements)},[s]}class oe extends mt{constructor(t){super(),ht(this,t,re,se,i,{pathElements:0})}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var ie,le,ae=(ie=function(t,e){t.exports=function(){var t=1e3,e=6e4,n=36e5,s="millisecond",r="second",o="minute",i="hour",l="day",a="week",c="month",u="quarter",f="year",d="date",p="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}},$=function(t,e,n){var s=String(t);return!s||s.length>=e?t:""+Array(e+1-s.length).join(n)+t},_={s:$,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),s=Math.floor(n/60),r=n%60;return(e<=0?"+":"-")+$(s,2,"0")+":"+$(r,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var s=12*(n.year()-e.year())+(n.month()-e.month()),r=e.clone().add(s,c),o=n-r<0,i=e.clone().add(s+(o?-1:1),c);return+(-(s+(n-r)/(o?r-i:i-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:f,w:a,d:l,D:d,h:i,m:o,s:r,ms:s,Q:u}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},v="en",y={};y[v]=g;var k=function(t){return t instanceof S},b=function t(e,n,s){var r;if(!e)return v;if("string"==typeof e){var o=e.toLowerCase();y[o]&&(r=o),n&&(y[o]=n,r=o);var i=e.split("-");if(!r&&i.length>1)return t(i[0])}else{var l=e.name;y[l]=e,r=l}return!s&&r&&(v=r),r||!s&&v},w=function(t,e){if(k(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new S(n)},x=_;x.l=b,x.i=k,x.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var S=function(){function g(t){this.$L=b(t.locale,null,!0),this.parse(t)}var $=g.prototype;return $.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(x.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var s=e.match(h);if(s){var r=s[2]-1||0,o=(s[7]||"0").substring(0,3);return n?new Date(Date.UTC(s[1],r,s[3]||1,s[4]||0,s[5]||0,s[6]||0,o)):new Date(s[1],r,s[3]||1,s[4]||0,s[5]||0,s[6]||0,o)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},$.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},$.$utils=function(){return x},$.isValid=function(){return!(this.$d.toString()===p)},$.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},$.isAfter=function(t,e){return w(t)<this.startOf(e)},$.isBefore=function(t,e){return this.endOf(e)<w(t)},$.$g=function(t,e,n){return x.u(t)?this[e]:this.set(n,t)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(t,e){var n=this,s=!!x.u(e)||e,u=x.p(t),p=function(t,e){var r=x.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return s?r:r.endOf(l)},h=function(t,e){return x.w(n.toDate()[t].apply(n.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},m=this.$W,g=this.$M,$=this.$D,_="set"+(this.$u?"UTC":"");switch(u){case f:return s?p(1,0):p(31,11);case c:return s?p(1,g):p(0,g+1);case a:var v=this.$locale().weekStart||0,y=(m<v?m+7:m)-v;return p(s?$-y:$+(6-y),g);case l:case d:return h(_+"Hours",0);case i:return h(_+"Minutes",1);case o:return h(_+"Seconds",2);case r:return h(_+"Milliseconds",3);default:return this.clone()}},$.endOf=function(t){return this.startOf(t,!1)},$.$set=function(t,e){var n,a=x.p(t),u="set"+(this.$u?"UTC":""),p=(n={},n[l]=u+"Date",n[d]=u+"Date",n[c]=u+"Month",n[f]=u+"FullYear",n[i]=u+"Hours",n[o]=u+"Minutes",n[r]=u+"Seconds",n[s]=u+"Milliseconds",n)[a],h=a===l?this.$D+(e-this.$W):e;if(a===c||a===f){var m=this.clone().set(d,1);m.$d[p](h),m.init(),this.$d=m.set(d,Math.min(this.$D,m.daysInMonth())).$d}else p&&this.$d[p](h);return this.init(),this},$.set=function(t,e){return this.clone().$set(t,e)},$.get=function(t){return this[x.p(t)]()},$.add=function(s,u){var d,p=this;s=Number(s);var h=x.p(u),m=function(t){var e=w(p);return x.w(e.date(e.date()+Math.round(t*s)),p)};if(h===c)return this.set(c,this.$M+s);if(h===f)return this.set(f,this.$y+s);if(h===l)return m(1);if(h===a)return m(7);var g=(d={},d[o]=e,d[i]=n,d[r]=t,d)[h]||1,$=this.$d.getTime()+s*g;return x.w($,this)},$.subtract=function(t,e){return this.add(-1*t,e)},$.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var s=t||"YYYY-MM-DDTHH:mm:ssZ",r=x.z(this),o=this.$H,i=this.$m,l=this.$M,a=n.weekdays,c=n.months,u=function(t,n,r,o){return t&&(t[n]||t(e,s))||r[n].slice(0,o)},f=function(t){return x.s(o%12||12,t,"0")},d=n.meridiem||function(t,e,n){var s=t<12?"AM":"PM";return n?s.toLowerCase():s},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:l+1,MM:x.s(l+1,2,"0"),MMM:u(n.monthsShort,l,c,3),MMMM:u(c,l),D:this.$D,DD:x.s(this.$D,2,"0"),d:String(this.$W),dd:u(n.weekdaysMin,this.$W,a,2),ddd:u(n.weekdaysShort,this.$W,a,3),dddd:a[this.$W],H:String(o),HH:x.s(o,2,"0"),h:f(1),hh:f(2),a:d(o,i,!0),A:d(o,i,!1),m:String(i),mm:x.s(i,2,"0"),s:String(this.$s),ss:x.s(this.$s,2,"0"),SSS:x.s(this.$ms,3,"0"),Z:r};return s.replace(m,(function(t,e){return e||h[t]||r.replace(":","")}))},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(s,d,p){var h,m=x.p(d),g=w(s),$=(g.utcOffset()-this.utcOffset())*e,_=this-g,v=x.m(this,g);return v=(h={},h[f]=v/12,h[c]=v,h[u]=v/3,h[a]=(_-$)/6048e5,h[l]=(_-$)/864e5,h[i]=_/n,h[o]=_/e,h[r]=_/t,h)[m]||_,p?v:x.a(v)},$.daysInMonth=function(){return this.endOf(c).$D},$.$locale=function(){return y[this.$L]},$.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),s=b(t,e,!0);return s&&(n.$L=s),n},$.clone=function(){return x.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},g}(),M=S.prototype;return w.prototype=M,[["$ms",s],["$s",r],["$m",o],["$H",i],["$W",l],["$M",c],["$y",f],["$D",d]].forEach((function(t){M[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,S,w),t.$i=!0),w},w.locale=b,w.isDayjs=k,w.unix=function(t){return w(1e3*t)},w.en=y[v],w.Ls=y,w.p={},w}()},ie(le={exports:{}},le.exports),le.exports);function ce(t,e){t.error.msg?(console.log(t.error.msg),e(null,t.error.msg)):e(t.data,null)}function ue(t){switch(t){case 1:return"Gray";case 2:return"DarkGreen";case 3:return"OrangeRed";case 104:return"Maroon";default:return"Black"}}function fe(t){return"/#/"}function de(t){return"/#/ks/"+t+"/matrix"}function pe(t,e,n){return"/#/ks/"+t+"/run/"+e+"/node/"+n+"/batch_history"}function he(t,e){return"/#/ks/"+t+"/run/"+e+"/node_history"}function me(t){switch(t){case 1:return"i/black-run.svg";case 2:return"i/black-finish.svg";case 3:return"i/black-stop.svg";default:return"i/black-question.svg"}}function ge(t){switch(t){case 1:return"i/blue-run.svg";case 2:return"i/blue-finish.svg";case 3:return"i/blue-stop.svg";default:return"i/blue-question.svg"}}function $e(t){switch(t){case 1:return"Running";case 2:return"Complete";case 3:return"Stopped/Invalidated";default:return"Unknown"}}function _e(t){switch(t){case 1:return"i/black-run.svg";case 2:return"i/black-check.svg";case 3:return"i/black-triangle.svg";case 104:return"i/black-stop.svg";default:return"i/black-question.svg"}}function ve(t){switch(t){case 1:return"i/blue-run.svg";case 2:return"i/blue-check.svg";case 3:return"i/blue-triangle.svg";case 104:return"i/blue-stop.svg";default:return"i/blue-question.svg"}}function ye(t){switch(t){case 1:return"Started";case 2:return"Success";case 3:return"Failure";case 104:return"Run stopped";default:return"Unknown"}}function ke(t,e,n){return[fe,de,pe,he,me,ge,$e,_e,ve,ye]}class be extends mt{constructor(t){super(),ht(this,t,ke,null,i,{rootLink:0,ksMatrixLink:1,ksRunNodeBatchHistoryLink:2,ksRunNodeHistoryLink:3,runStatusToIconStatic:4,runStatusToIconLink:5,runStatusToText:6,nodeStatusToIconStatic:7,nodeStatusToIconLink:8,nodeStatusToText:9})}get rootLink(){return fe}get ksMatrixLink(){return de}get ksRunNodeBatchHistoryLink(){return pe}get ksRunNodeHistoryLink(){return he}get runStatusToIconStatic(){return me}get runStatusToIconLink(){return ge}get runStatusToText(){return $e}get nodeStatusToIconStatic(){return _e}get nodeStatusToIconLink(){return ve}get nodeStatusToText(){return ye}}const we=_t({});function xe(t){let e,n,s,o,i,l,a,c,u,f,d,p,h,m,g,$,_,b,M,L,Y,H,C,I,N,R,q=t[3]&&Se();return{c(){e=w("div"),n=w("div"),s=w("p"),s.textContent="You are about to start a new run",o=x("\r\n      Run description:\r\n      "),i=w("input"),l=x("\r\n      Keyspace:\r\n      "),a=w("input"),c=x("\r\n      Script URI:\r\n      "),u=w("input"),f=x("\r\n      Script parameters URI:\r\n      "),d=w("input"),p=x("\r\n      Start nodes:\r\n      "),h=w("input"),m=S(),g=w("p"),$=x(t[2]),_=S(),b=w("div"),q&&q.c(),M=S(),L=w("button"),Y=x("Cancel"),H=S(),C=w("button"),I=x("OK"),i.disabled=t[3],a.disabled=t[3],u.disabled=t[3],d.disabled=t[3],h.disabled=t[3],D(g,"color","red"),L.disabled=t[3],O(L,"class","svelte-sv854a"),C.disabled=t[3],O(C,"class","svelte-sv854a"),O(b,"class","actions svelte-sv854a"),O(n,"class","contents svelte-sv854a"),O(e,"role","dialog"),O(e,"class","modal svelte-sv854a")},m(r,k){y(r,e,k),v(e,n),v(n,s),v(n,o),v(n,i),j(i,t[7]),v(n,l),v(n,a),j(a,t[0]),v(n,c),v(n,u),j(u,t[4]),v(n,f),v(n,d),j(d,t[5]),v(n,p),v(n,h),j(h,t[6]),v(n,m),v(n,g),v(g,$),v(n,_),v(n,b),q&&q.m(b,null),v(b,M),v(b,L),v(L,Y),v(b,H),v(b,C),v(C,I),N||(R=[T(i,"input",t[9]),T(a,"input",t[10]),T(u,"input",t[11]),T(d,"input",t[12]),T(h,"input",t[13]),T(L,"click",Yt),T(C,"click",t[8])],N=!0)},p(t,e){8&e&&(i.disabled=t[3]),128&e&&i.value!==t[7]&&j(i,t[7]),8&e&&(a.disabled=t[3]),1&e&&a.value!==t[0]&&j(a,t[0]),8&e&&(u.disabled=t[3]),16&e&&u.value!==t[4]&&j(u,t[4]),8&e&&(d.disabled=t[3]),32&e&&d.value!==t[5]&&j(d,t[5]),8&e&&(h.disabled=t[3]),64&e&&h.value!==t[6]&&j(h,t[6]),4&e&&E($,t[2]),t[3]?q||(q=Se(),q.c(),q.m(b,M)):q&&(q.d(1),q=null),8&e&&(L.disabled=t[3]),8&e&&(C.disabled=t[3])},d(t){t&&k(e),q&&q.d(),N=!1,r(R)}}}function Se(t){let e,n;return{c(){e=w("img"),c(e.src,n="i/wait.svg")||O(e,"src","i/wait.svg"),D(e,"height","30px"),D(e,"padding-right","10px"),D(e,"padding-top","5px"),O(e,"alt","")},m(t,n){y(t,e,n)},d(t){t&&k(e)}}}function Me(e){let n,s=e[1]&&xe(e);return{c(){s&&s.c(),n=M()},m(t,e){s&&s.m(t,e),y(t,n,e)},p(t,[e]){t[1]?s?s.p(t,e):(s=xe(t),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:t,o:t,d(t){s&&s.d(t),t&&k(n)}}}function Te(t){return 0==t.trim().length?"file URI cannot be empty; ":""}function Oe(t,e,n){let s;d(t,we,(t=>n(14,s=t)));let{isOpen:r}=e,{keyspace:o}=e,i="",l=!1;function a(t,e){n(3,l=!1),e?n(2,i=e):(console.log(t),n(2,i=""),Yt())}let c="",u="",f="",p="Manually started from Capillaries-UI at "+ae().format("MMM D, YYYY HH:mm:ss.SSS Z");return R(we.subscribe((t=>{o in t&&(n(4,c=t[o].scriptUri),n(5,u=t[o].paramsUri))}))),t.$$set=t=>{"isOpen"in t&&n(1,r=t.isOpen),"keyspace"in t&&n(0,o=t.keyspace)},[o,r,i,l,c,u,f,p,function(){var t;if(n(2,i=function(t){if(0==t.trim().length)return"keyspace cannot be empty; ";if(t.startsWith("system"))return"keyspace name cannot start with 'system'; ";const e=/[a-zA-Z0-9_]+/g;return t.match(e)?"":"keyspace name allowed pattern: "+e+"; "}(o)+Te(c)+Te(u)+(0==(t=f).trim().length?"start nodes string cannot be empty; ":t.match(/[a-zA-Z0-9_,]+/g)?"":"start node list must be comma-separated, only a-zA-Z0-9_ allowed in node names; ")),0==i.length){_(we,s[o]={scriptUri:c,paramsUri:u},s),n(3,l=!0);let t="http://localhost:6543/ks/"+o+"/run",e="POST";fetch(new Request(t,{method:e,body:JSON.stringify({script_uri:c,script_params_uri:u,start_nodes:f,run_description:p})})).then((t=>t.json())).then((t=>{ce(t,a)})).catch((s=>{n(3,l=!1),n(2,i=e+" "+t+":"+s)}))}},function(){p=this.value,n(7,p)},function(){o=this.value,n(0,o)},function(){c=this.value,n(4,c)},function(){u=this.value,n(5,u)},function(){f=this.value,n(6,f)}]}class Ee extends mt{constructor(t){super(),ht(this,t,Oe,Me,i,{isOpen:1,keyspace:0})}}function je(t,e,n){const s=t.slice();return s[13]=e[n],s}function De(t){let e,n,s,r,i,l,a,c,u,f,d,p=t[13]+"";return{c(){e=w("tr"),n=w("td"),s=w("a"),r=x(p),l=S(),a=w("td"),c=w("button"),c.textContent="Drop",u=S(),O(s,"href",i=t[0].ksMatrixLink(t[13])),O(c,"title","Drops the keyspace without any warnings")},m(i,p){y(i,e,p),v(e,n),v(n,s),v(s,r),v(e,l),v(e,a),v(a,c),v(e,u),f||(d=T(c,"click",(function(){o(t[6](t[13]))&&t[6](t[13]).apply(this,arguments)})),f=!0)},p(e,n){t=e,4&n&&p!==(p=t[13]+"")&&E(r,p),5&n&&i!==(i=t[0].ksMatrixLink(t[13]))&&O(s,"href",i)},d(t){t&&k(e),f=!1,d()}}}function Le(t){let e,n,s,r,o,i,l,a,c,u,f,d,p,h,m,g,$,_,M,j,L,Y,H,C,I,N,R=t[2].length+"";function q(e){t[8](e)}e=new be({props:{}}),t[7](e);let A={};void 0!==t[1]&&(A.pathElements=t[1]),s=new oe({props:A}),Z.push((()=>ut(s,"pathElements",q)));let U=t[2],B=[];for(let e=0;e<U.length;e+=1)B[e]=De(je(t,U,e));return{c(){ft(e.$$.fragment),n=S(),ft(s.$$.fragment),o=S(),i=w("p"),l=x(t[3]),a=S(),c=w("p"),u=x(t[4]),f=S(),d=w("button"),d.textContent="New run",p=S(),h=w("table"),m=w("thead"),g=w("th"),$=x("Keyspaces ("),_=x(R),M=x(")"),j=S(),L=w("th"),L.textContent="Drop",Y=S(),H=w("tbody");for(let t=0;t<B.length;t+=1)B[t].c();D(i,"color","red"),D(c,"color","red"),O(d,"title","Opens a popup to specify parameters (keyspace, script URI etc) for a new run")},m(r,k){dt(e,r,k),y(r,n,k),dt(s,r,k),y(r,o,k),y(r,i,k),v(i,l),y(r,a,k),y(r,c,k),v(c,u),y(r,f,k),y(r,d,k),y(r,p,k),y(r,h,k),v(h,m),v(m,g),v(g,$),v(g,_),v(g,M),v(m,j),v(m,L),v(h,Y),v(h,H);for(let t=0;t<B.length;t+=1)B[t].m(H,null);C=!0,I||(N=T(d,"click",t[5]),I=!0)},p(t,[n]){e.$set({});const o={};if(!r&&2&n&&(r=!0,o.pathElements=t[1],P((()=>r=!1))),s.$set(o),(!C||8&n)&&E(l,t[3]),(!C||16&n)&&E(u,t[4]),(!C||4&n)&&R!==(R=t[2].length+"")&&E(_,R),69&n){let e;for(U=t[2],e=0;e<U.length;e+=1){const s=je(t,U,e);B[e]?B[e].p(s,n):(B[e]=De(s),B[e].c(),B[e].m(H,null))}for(;e<B.length;e+=1)B[e].d(1);B.length=U.length}},i(t){C||(rt(e.$$.fragment,t),rt(s.$$.fragment,t),C=!0)},o(t){ot(e.$$.fragment,t),ot(s.$$.fragment,t),C=!1},d(r){t[7](null),pt(e,r),r&&k(n),pt(s,r),r&&k(o),r&&k(i),r&&k(a),r&&k(c),r&&k(f),r&&k(d),r&&k(p),r&&k(h),b(B,r),I=!1,N()}}}function Ye(t,e,n){let s,r=[],o=[],i="";function l(t,e){n(2,o=t||[]),n(3,i=e?e.msg:"")}var a;let c=!1;function u(){let t="http://localhost:6543/ks/";fetch(new Request(t,{method:"GET"})).then((t=>t.json())).then((t=>{ce(t,l),c||(a=setTimeout(u,500))})).catch((e=>{n(3,i="GET "+t+":"+e),console.log(e),c||(a=setTimeout(u,3e3))}))}I((async()=>{n(1,r=[{title:"Keyspaces"}]),u()})),R((async()=>{c=!0,a&&clearTimeout(a)}));let f="";return[s,r,o,i,f,function(){Ht(Ee,{keyspace:""})},function(t){let e="http://localhost:6543/ks/"+t,s="DELETE";fetch(new Request(e,{method:s})).then((t=>t.json())).then((t=>{n(4,f=t?t.error.msg:"")})).catch((t=>{n(4,f="DELETE "+e+":"+t),console.log(t)}))},function(t){Z[t?"unshift":"push"]((()=>{s=t,n(0,s)}))},function(t){r=t,n(1,r)}]}class He extends mt{constructor(t){super(),ht(this,t,Ye,Le,i,{})}}function Ce(t){let e,n,s,o,i,l,a,c,u,f,d,p,h,m,g,$,_,b,M,L,Y,H,C=t[4]&&Ie();return{c(){e=w("div"),n=w("div"),s=w("p"),o=x("You are about to stop/invalidate run "),i=x(t[1]),l=x(" in "),a=x(t[2]),c=x("\r\n      Comment (will be stored in run history):\r\n      "),u=w("input"),f=S(),d=w("p"),p=x(t[3]),h=S(),m=w("div"),C&&C.c(),g=S(),$=w("button"),_=x("Cancel"),b=S(),M=w("button"),L=x("OK"),u.disabled=t[4],D(d,"color","red"),$.disabled=t[4],O($,"class","svelte-sv854a"),M.disabled=t[4],O(M,"class","svelte-sv854a"),O(m,"class","actions svelte-sv854a"),O(n,"class","contents svelte-sv854a"),O(e,"role","dialog"),O(e,"class","modal svelte-sv854a")},m(r,k){y(r,e,k),v(e,n),v(n,s),v(s,o),v(s,i),v(s,l),v(s,a),v(n,c),v(n,u),j(u,t[5]),v(n,f),v(n,d),v(d,p),v(n,h),v(n,m),C&&C.m(m,null),v(m,g),v(m,$),v($,_),v(m,b),v(m,M),v(M,L),Y||(H=[T(u,"input",t[7]),T($,"click",Yt),T(M,"click",t[6])],Y=!0)},p(t,e){2&e&&E(i,t[1]),4&e&&E(a,t[2]),16&e&&(u.disabled=t[4]),32&e&&u.value!==t[5]&&j(u,t[5]),8&e&&E(p,t[3]),t[4]?C||(C=Ie(),C.c(),C.m(m,g)):C&&(C.d(1),C=null),16&e&&($.disabled=t[4]),16&e&&(M.disabled=t[4])},d(t){t&&k(e),C&&C.d(),Y=!1,r(H)}}}function Ie(t){let e,n;return{c(){e=w("img"),c(e.src,n="i/wait.svg")||O(e,"src","i/wait.svg"),D(e,"height","30px"),D(e,"padding-right","10px"),D(e,"padding-top","5px"),O(e,"alt","")},m(t,n){y(t,e,n)},d(t){t&&k(e)}}}function Ne(e){let n,s=e[0]&&Ce(e);return{c(){s&&s.c(),n=M()},m(t,e){s&&s.m(t,e),y(t,n,e)},p(t,[e]){t[0]?s?s.p(t,e):(s=Ce(t),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:t,o:t,d(t){s&&s.d(t),t&&k(n)}}}function Re(t,e,n){let{isOpen:s}=e,{run_id:r}=e,{keyspace:o}=e,i="",l=!1;function a(t,e){n(4,l=!1),e?n(3,i=e.error.msg):(n(3,i=""),Yt())}let c="Manually stopped/invalidated from Capillaries-UI at "+ae().format("MMM D, YYYY HH:mm:ss.SSS Z");return t.$$set=t=>{"isOpen"in t&&n(0,s=t.isOpen),"run_id"in t&&n(1,r=t.run_id),"keyspace"in t&&n(2,o=t.keyspace)},[s,r,o,i,l,c,function(){n(4,l=!0);let t="http://localhost:6543/ks/"+o+"/run/"+r,e="DELETE";fetch(new Request(t,{method:e,body:'{"comment": "'+c+'"}'})).then((t=>t.json())).then((t=>{ce(t,a)})).catch((e=>{n(4,l=!1),n(3,i="DELETE "+t+":"+e)}))},function(){c=this.value,n(5,c)}]}class qe extends mt{constructor(t){super(),ht(this,t,Re,Ne,i,{isOpen:0,run_id:1,keyspace:2})}}function Ae(t,e,n){const s=t.slice();return s[13]=e[n],s}function Ue(t,e,n){const s=t.slice();return s[16]=e[n],s}function Ze(t,e,n){const s=t.slice();return s[19]=e[n],s}function Be(t,e,n){const s=t.slice();return s[19]=e[n],s}function We(t,e,n){const s=t.slice();return s[19]=e[n],s}function ze(t){let e,n,s,r,o,i,l,a,u=t[19].run_id+"";return{c(){e=w("th"),n=w("a"),s=x(u),r=w("img"),c(r.src,o=t[1].runStatusToIconLink(t[19].final_status))||O(r,"src",o),O(r,"title",i=t[1].runStatusToText(t[19].final_status)),O(r,"alt",""),D(r,"margin-left","3px"),O(r,"class","svelte-ft72d2"),O(n,"href",l=t[1].ksRunNodeHistoryLink(t[0].ks_name,t[19].run_id)),O(n,"title",a="Run "+t[19].run_id),O(e,"class","svelte-ft72d2")},m(t,o){y(t,e,o),v(e,n),v(n,s),v(n,r)},p(t,e){8&e&&u!==(u=t[19].run_id+"")&&E(s,u),10&e&&!c(r.src,o=t[1].runStatusToIconLink(t[19].final_status))&&O(r,"src",o),10&e&&i!==(i=t[1].runStatusToText(t[19].final_status))&&O(r,"title",i),11&e&&l!==(l=t[1].ksRunNodeHistoryLink(t[0].ks_name,t[19].run_id))&&O(n,"href",l),8&e&&a!==(a="Run "+t[19].run_id)&&O(n,"title",a)},d(t){t&&k(e)}}}function Ge(t){let e,n,s,r=t[19].elapsed+"";return{c(){e=w("td"),n=x(r),s=x("s"),D(e,"font-size","small"),O(e,"class","svelte-ft72d2")},m(t,r){y(t,e,r),v(e,n),v(e,s)},p(t,e){8&e&&r!==(r=t[19].elapsed+"")&&E(n,r)},d(t){t&&k(e)}}}function Fe(e){let n;return{c(){n=x(" ")},m(t,e){y(t,n,e)},p:t,d(t){t&&k(n)}}}function Ke(t){let e,n,s,r;function i(t,e){return 1===t[19].final_status?Je:Pe}let l=i(t),a=l(t);return{c(){e=w("button"),a.c(),O(e,"title",n=1===t[19].final_status?"Stop run":"Invalidate the results of a complete run so they cannot be used in depending runs")},m(n,i){y(n,e,i),a.m(e,null),s||(r=T(e,"click",(function(){o(t[5](t[19].run_id))&&t[5](t[19].run_id).apply(this,arguments)})),s=!0)},p(s,r){l!==(l=i(t=s))&&(a.d(1),a=l(t),a&&(a.c(),a.m(e,null))),8&r&&n!==(n=1===t[19].final_status?"Stop run":"Invalidate the results of a complete run so they cannot be used in depending runs")&&O(e,"title",n)},d(t){t&&k(e),a.d(),s=!1,r()}}}function Pe(t){let e;return{c(){e=x("Invalidate")},m(t,n){y(t,e,n)},d(t){t&&k(e)}}}function Je(t){let e;return{c(){e=x("Stop")},m(t,n){y(t,e,n)},d(t){t&&k(e)}}}function Ve(t){let e;function n(t,e){return 3!=t[19].final_status?Ke:Fe}let s=n(t),r=s(t);return{c(){e=w("td"),r.c(),O(e,"class","svelte-ft72d2")},m(t,n){y(t,e,n),r.m(e,null)},p(t,o){s===(s=n(t))&&r?r.p(t,o):(r.d(1),r=s(t),r&&(r.c(),r.m(e,null)))},d(t){t&&k(e),r.d()}}}function Xe(t){let e,n,s,r,o;return{c(){e=w("a"),n=w("img"),c(n.src,s=t[1].nodeStatusToIconLink(t[16].status))||O(n,"src",s),O(n,"title",r=t[1].nodeStatusToText(t[16].status)+" - "+ae(t[16].ts).format()),O(n,"alt",""),O(n,"class","svelte-ft72d2"),O(e,"href",o=t[1].ksRunNodeBatchHistoryLink(t[0].ks_name,t[16].run_id,t[13].node_name))},m(t,s){y(t,e,s),v(e,n)},p(t,i){10&i&&!c(n.src,s=t[1].nodeStatusToIconLink(t[16].status))&&O(n,"src",s),10&i&&r!==(r=t[1].nodeStatusToText(t[16].status)+" - "+ae(t[16].ts).format())&&O(n,"title",r),11&i&&o!==(o=t[1].ksRunNodeBatchHistoryLink(t[0].ks_name,t[16].run_id,t[13].node_name))&&O(e,"href",o)},d(t){t&&k(e)}}}function Qe(t){let e,n=t[16].status>0&&Xe(t);return{c(){e=w("td"),n&&n.c(),O(e,"class","svelte-ft72d2")},m(t,s){y(t,e,s),n&&n.m(e,null)},p(t,s){t[16].status>0?n?n.p(t,s):(n=Xe(t),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},d(t){t&&k(e),n&&n.d()}}}function tn(t){let e,n,s,r,o,i,l,a,c,u=t[13].node_name+"",f=t[13].node_desc+"",d=t[13].node_statuses,p=[];for(let e=0;e<d.length;e+=1)p[e]=Qe(Ue(t,d,e));return{c(){e=w("tr"),n=w("td"),s=x(u),r=x(": "),o=x(f),i=S();for(let t=0;t<p.length;t+=1)p[t].c();l=S(),a=w("td"),a.textContent=" ",c=S(),O(n,"class","svelte-ft72d2"),O(a,"class","svelte-ft72d2"),O(e,"class","svelte-ft72d2")},m(t,u){y(t,e,u),v(e,n),v(n,s),v(n,r),v(n,o),v(e,i);for(let t=0;t<p.length;t+=1)p[t].m(e,null);v(e,l),v(e,a),v(e,c)},p(t,n){if(8&n&&u!==(u=t[13].node_name+"")&&E(s,u),8&n&&f!==(f=t[13].node_desc+"")&&E(o,f),11&n){let s;for(d=t[13].node_statuses,s=0;s<d.length;s+=1){const r=Ue(t,d,s);p[s]?p[s].p(r,n):(p[s]=Qe(r),p[s].c(),p[s].m(e,l))}for(;s<p.length;s+=1)p[s].d(1);p.length=d.length}},d(t){t&&k(e),b(p,t)}}}function en(t){let e,n,s,r,o,i,l,a,c,u,f,d,p,h,m,g,$,_,M,j,L,Y,H,C,I,N,R,q,A,U,B,W,z,G,F,K,J,V=t[3].nodes.length+"",X=t[3].run_lifespans.length+"";function Q(e){t[8](e)}e=new be({props:{}}),t[7](e);let tt={};void 0!==t[2]&&(tt.pathElements=t[2]),s=new oe({props:tt}),Z.push((()=>ut(s,"pathElements",Q)));let et=t[3].run_lifespans,nt=[];for(let e=0;e<et.length;e+=1)nt[e]=ze(We(t,et,e));let st=t[3].run_lifespans,it=[];for(let e=0;e<st.length;e+=1)it[e]=Ge(Be(t,st,e));let lt=t[3].run_lifespans,at=[];for(let e=0;e<lt.length;e+=1)at[e]=Ve(Ze(t,lt,e));let ct=t[3].nodes,ht=[];for(let e=0;e<ct.length;e+=1)ht[e]=tn(Ae(t,ct,e));return{c(){ft(e.$$.fragment),n=S(),ft(s.$$.fragment),o=S(),i=w("p"),l=x(t[4]),a=S(),c=w("table"),u=w("thead"),f=w("th"),d=x("Nodes ("),p=x(V),h=x(") \\ Runs ("),m=x(X),g=x(")"),$=S();for(let t=0;t<nt.length;t+=1)nt[t].c();_=S(),M=w("th"),j=w("button"),j.textContent="New",L=S(),Y=w("tbody"),H=w("tr"),C=w("td"),I=S();for(let t=0;t<it.length;t+=1)it[t].c();N=S(),R=w("td"),R.textContent=" ",q=S(),A=w("tr"),U=w("td"),B=S();for(let t=0;t<at.length;t+=1)at[t].c();W=S(),z=w("td"),z.textContent=" ",G=S();for(let t=0;t<ht.length;t+=1)ht[t].c();D(i,"color","red"),O(f,"class","svelte-ft72d2"),O(j,"title","Opens a popup to specify parameters (keyspace, script URI etc) for a new run"),O(M,"class","svelte-ft72d2"),O(u,"class","svelte-ft72d2"),O(C,"class","svelte-ft72d2"),O(R,"class","svelte-ft72d2"),O(H,"class","svelte-ft72d2"),O(U,"class","svelte-ft72d2"),O(z,"class","svelte-ft72d2"),O(A,"class","svelte-ft72d2")},m(r,k){dt(e,r,k),y(r,n,k),dt(s,r,k),y(r,o,k),y(r,i,k),v(i,l),y(r,a,k),y(r,c,k),v(c,u),v(u,f),v(f,d),v(f,p),v(f,h),v(f,m),v(f,g),v(u,$);for(let t=0;t<nt.length;t+=1)nt[t].m(u,null);v(u,_),v(u,M),v(M,j),v(c,L),v(c,Y),v(Y,H),v(H,C),v(H,I);for(let t=0;t<it.length;t+=1)it[t].m(H,null);v(H,N),v(H,R),v(Y,q),v(Y,A),v(A,U),v(A,B);for(let t=0;t<at.length;t+=1)at[t].m(A,null);v(A,W),v(A,z),v(Y,G);for(let t=0;t<ht.length;t+=1)ht[t].m(Y,null);F=!0,K||(J=T(j,"click",t[6]),K=!0)},p(t,[n]){e.$set({});const o={};if(!r&&4&n&&(r=!0,o.pathElements=t[2],P((()=>r=!1))),s.$set(o),(!F||16&n)&&E(l,t[4]),(!F||8&n)&&V!==(V=t[3].nodes.length+"")&&E(p,V),(!F||8&n)&&X!==(X=t[3].run_lifespans.length+"")&&E(m,X),11&n){let e;for(et=t[3].run_lifespans,e=0;e<et.length;e+=1){const s=We(t,et,e);nt[e]?nt[e].p(s,n):(nt[e]=ze(s),nt[e].c(),nt[e].m(u,_))}for(;e<nt.length;e+=1)nt[e].d(1);nt.length=et.length}if(8&n){let e;for(st=t[3].run_lifespans,e=0;e<st.length;e+=1){const s=Be(t,st,e);it[e]?it[e].p(s,n):(it[e]=Ge(s),it[e].c(),it[e].m(H,N))}for(;e<it.length;e+=1)it[e].d(1);it.length=st.length}if(40&n){let e;for(lt=t[3].run_lifespans,e=0;e<lt.length;e+=1){const s=Ze(t,lt,e);at[e]?at[e].p(s,n):(at[e]=Ve(s),at[e].c(),at[e].m(A,W))}for(;e<at.length;e+=1)at[e].d(1);at.length=lt.length}if(11&n){let e;for(ct=t[3].nodes,e=0;e<ct.length;e+=1){const s=Ae(t,ct,e);ht[e]?ht[e].p(s,n):(ht[e]=tn(s),ht[e].c(),ht[e].m(Y,null))}for(;e<ht.length;e+=1)ht[e].d(1);ht.length=ct.length}},i(t){F||(rt(e.$$.fragment,t),rt(s.$$.fragment,t),F=!0)},o(t){ot(e.$$.fragment,t),ot(s.$$.fragment,t),F=!1},d(r){t[7](null),pt(e,r),r&&k(n),pt(s,r),r&&k(o),r&&k(i),r&&k(a),r&&k(c),b(nt,r),b(it,r),b(at,r),b(ht,r),K=!1,J()}}}function nn(t,e,n){let s,{params:r}=e,o=[],i={run_lifespans:[],nodes:[]},l="";function a(t,e){n(3,i=t||{run_lifespans:[],nodes:[]}),n(4,l=e?e.msg:"");for(var s=0;s<i.run_lifespans.length;s++){const t=ae(i.run_lifespans[s].start_ts).valueOf(),e=ae(i.run_lifespans[s].completed_ts).valueOf(),r=ae(i.run_lifespans[s].stopped_ts).valueOf();n(3,i.run_lifespans[s].elapsed=Math.round((e>0?e-t:r>0?r-t:Date.now()-t)/1e3).toString(),i)}}var c;let u=!1;function f(){let t="http://localhost:6543/ks/"+r.ks_name;fetch(new Request(t,{method:"GET"})).then((t=>t.json())).then((t=>{ce(t,a),u||(c=setTimeout(f,500))})).catch((e=>{n(4,l="GET "+t+":"+e),console.log(e),u||(c=setTimeout(f,3e3))}))}return I((async()=>{n(2,o=[{title:"Keyspaces",link:s.rootLink()},{title:r.ks_name}]),f()})),R((async()=>{u=!0,c&&clearTimeout(c)})),t.$$set=t=>{"params"in t&&n(0,r=t.params)},[r,s,o,i,l,function(t){Ht(qe,{keyspace:r.ks_name,run_id:t})},function(){Ht(Ee,{keyspace:r.ks_name})},function(t){Z[t?"unshift":"push"]((()=>{s=t,n(1,s)}))},function(t){o=t,n(2,o)}]}class sn extends mt{constructor(t){super(),ht(this,t,nn,en,i,{params:0})}}function rn(t){let e,n,s,r,o,i,l,a,u,f,d,p,h,m,g,$,_,b,M,T,j,L,Y,H,C,I,N,R,q,A,U,Z,B,W,z,G,F,K,P,J,V,X,Q,tt,et,nt,st,rt,ot,it,lt,at,ct,ut,ft,dt=t[0].run_id+"",pt=ae(t[0].start_ts).format("MMM D, YYYY HH:mm:ss.SSS Z")+"",ht=t[0].start_comment+"",mt=(ae(t[0].completed_ts).valueOf()>0?ae(t[0].completed_ts).format("MMM D, YYYY HH:mm:ss.SSS Z"):"never")+"",gt=t[0].completed_comment+"",$t=(ae(t[0].stopped_ts).valueOf()>0?ae(t[0].stopped_ts).format("MMM D, YYYY HH:mm:ss.SSS Z"):"never")+"",_t=t[0].stopped_comment+"",vt=t[4](t[0])+"",yt=t[2].runStatusToText(t[0].final_status)+"";function kt(t,e){return 3!=t[0].final_status?ln:on}let bt=kt(t),wt=bt(t);return{c(){e=w("table"),n=w("thead"),n.innerHTML='<th colspan="3">Run summary</th>',s=S(),r=w("tbody"),o=w("tr"),i=w("td"),i.textContent="Run Id:",l=S(),a=w("td"),u=x(dt),f=S(),d=w("td"),p=S(),h=w("tr"),m=w("td"),m.textContent="Started",g=S(),$=w("td"),_=x(pt),b=S(),M=w("td"),T=x(ht),j=S(),L=w("tr"),Y=w("td"),Y.textContent="Completed",H=S(),C=w("td"),I=x(mt),N=S(),R=w("td"),q=x(gt),A=S(),U=w("tr"),Z=w("td"),Z.textContent="Stopped/Invalidated",B=S(),W=w("td"),z=x($t),G=S(),F=w("td"),K=x(_t),P=S(),J=w("tr"),V=w("td"),V.textContent="Elapsed",X=S(),Q=w("td"),tt=x(vt),et=S(),nt=w("tr"),st=w("td"),st.textContent="Status",rt=S(),ot=w("td"),it=w("img"),ct=x(" \r\n                "),ut=x(yt),ft=x(" \r\n                "),wt.c(),O(i,"class","svelte-f06jps"),O(a,"class","svelte-f06jps"),O(d,"class","svelte-f06jps"),O(o,"class","svelte-f06jps"),O(m,"class","svelte-f06jps"),D($,"white-space","nowrap"),O($,"class","svelte-f06jps"),O(M,"class","svelte-f06jps"),O(h,"class","svelte-f06jps"),O(Y,"class","svelte-f06jps"),D(C,"white-space","nowrap"),O(C,"class","svelte-f06jps"),O(R,"class","svelte-f06jps"),O(L,"class","svelte-f06jps"),O(Z,"class","svelte-f06jps"),D(W,"white-space","nowrap"),O(W,"class","svelte-f06jps"),O(F,"class","svelte-f06jps"),O(U,"class","svelte-f06jps"),O(V,"class","svelte-f06jps"),O(Q,"colspan","2"),D(Q,"white-space","nowrap"),O(Q,"class","svelte-f06jps"),O(J,"class","svelte-f06jps"),O(st,"class","svelte-f06jps"),c(it.src,lt=t[2].runStatusToIconStatic(t[0].final_status))||O(it,"src",lt),O(it,"title",at=t[2].runStatusToText(t[0].final_status)),O(it,"alt",""),O(it,"class","svelte-f06jps"),O(ot,"colspan","2"),D(ot,"white-space","nowrap"),O(ot,"class","svelte-f06jps"),O(nt,"class","svelte-f06jps")},m(t,c){y(t,e,c),v(e,n),v(e,s),v(e,r),v(r,o),v(o,i),v(o,l),v(o,a),v(a,u),v(o,f),v(o,d),v(r,p),v(r,h),v(h,m),v(h,g),v(h,$),v($,_),v(h,b),v(h,M),v(M,T),v(r,j),v(r,L),v(L,Y),v(L,H),v(L,C),v(C,I),v(L,N),v(L,R),v(R,q),v(r,A),v(r,U),v(U,Z),v(U,B),v(U,W),v(W,z),v(U,G),v(U,F),v(F,K),v(r,P),v(r,J),v(J,V),v(J,X),v(J,Q),v(Q,tt),v(r,et),v(r,nt),v(nt,st),v(nt,rt),v(nt,ot),v(ot,it),v(ot,ct),v(ot,ut),v(ot,ft),wt.m(ot,null)},p(t,e){1&e&&dt!==(dt=t[0].run_id+"")&&E(u,dt),1&e&&pt!==(pt=ae(t[0].start_ts).format("MMM D, YYYY HH:mm:ss.SSS Z")+"")&&E(_,pt),1&e&&ht!==(ht=t[0].start_comment+"")&&E(T,ht),1&e&&mt!==(mt=(ae(t[0].completed_ts).valueOf()>0?ae(t[0].completed_ts).format("MMM D, YYYY HH:mm:ss.SSS Z"):"never")+"")&&E(I,mt),1&e&&gt!==(gt=t[0].completed_comment+"")&&E(q,gt),1&e&&$t!==($t=(ae(t[0].stopped_ts).valueOf()>0?ae(t[0].stopped_ts).format("MMM D, YYYY HH:mm:ss.SSS Z"):"never")+"")&&E(z,$t),1&e&&_t!==(_t=t[0].stopped_comment+"")&&E(K,_t),1&e&&vt!==(vt=t[4](t[0])+"")&&E(tt,vt),5&e&&!c(it.src,lt=t[2].runStatusToIconStatic(t[0].final_status))&&O(it,"src",lt),5&e&&at!==(at=t[2].runStatusToText(t[0].final_status))&&O(it,"title",at),5&e&&yt!==(yt=t[2].runStatusToText(t[0].final_status)+"")&&E(ut,yt),bt===(bt=kt(t))&&wt?wt.p(t,e):(wt.d(1),wt=bt(t),wt&&(wt.c(),wt.m(ot,null)))},d(t){t&&k(e),wt.d()}}}function on(e){let n;return{c(){n=x(" ")},m(t,e){y(t,n,e)},p:t,d(t){t&&k(n)}}}function ln(t){let e,n,s,r;function o(t,e){return 1===t[0].final_status?cn:an}let i=o(t),l=i(t);return{c(){e=w("button"),l.c(),O(e,"title",n=1===t[0].final_status?"Stop run":"Invalidate the results of a complete run so they cannot be used in depending runs")},m(n,o){y(n,e,o),l.m(e,null),s||(r=T(e,"click",t[3]),s=!0)},p(t,s){i!==(i=o(t))&&(l.d(1),l=i(t),l&&(l.c(),l.m(e,null))),1&s&&n!==(n=1===t[0].final_status?"Stop run":"Invalidate the results of a complete run so they cannot be used in depending runs")&&O(e,"title",n)},d(t){t&&k(e),l.d(),s=!1,r()}}}function an(t){let e;return{c(){e=x("Invalidate")},m(t,n){y(t,e,n)},d(t){t&&k(e)}}}function cn(t){let e;return{c(){e=x("Stop")},m(t,n){y(t,e,n)},d(t){t&&k(e)}}}function un(t){let e,n,s,r,o,i,l,a,c,u,f,d,p,h,m,g,$,_,b,M,T,j,D,L,Y,H,C,I,N,R,q,A=t[1].run_description+"",U=t[1].script_uri+"",Z=t[1].script_params_uri+"",B=t[1].start_nodes+"",W=t[1].affected_nodes+"";return{c(){e=w("table"),n=w("tbody"),s=w("tr"),r=w("td"),r.textContent="Description:",o=S(),i=w("td"),l=x(A),a=S(),c=w("tr"),u=w("td"),u.textContent="Script URI:",f=S(),d=w("td"),p=x(U),h=S(),m=w("tr"),g=w("td"),g.textContent="Script parameters URI:",$=S(),_=w("td"),b=x(Z),M=S(),T=w("tr"),j=w("td"),j.textContent="Start nodes:",D=S(),L=w("td"),Y=x(B),H=S(),C=w("tr"),I=w("td"),I.textContent="Affected nodes:",N=S(),R=w("td"),q=x(W),O(r,"class","svelte-f06jps"),O(i,"class","svelte-f06jps"),O(s,"class","svelte-f06jps"),O(u,"class","svelte-f06jps"),O(d,"class","svelte-f06jps"),O(c,"class","svelte-f06jps"),O(g,"class","svelte-f06jps"),O(_,"class","svelte-f06jps"),O(m,"class","svelte-f06jps"),O(j,"class","svelte-f06jps"),O(L,"class","svelte-f06jps"),O(T,"class","svelte-f06jps"),O(I,"class","svelte-f06jps"),O(R,"class","svelte-f06jps"),O(C,"class","svelte-f06jps")},m(t,k){y(t,e,k),v(e,n),v(n,s),v(s,r),v(s,o),v(s,i),v(i,l),v(n,a),v(n,c),v(c,u),v(c,f),v(c,d),v(d,p),v(n,h),v(n,m),v(m,g),v(m,$),v(m,_),v(_,b),v(n,M),v(n,T),v(T,j),v(T,D),v(T,L),v(L,Y),v(n,H),v(n,C),v(C,I),v(C,N),v(C,R),v(R,q)},p(t,e){2&e&&A!==(A=t[1].run_description+"")&&E(l,A),2&e&&U!==(U=t[1].script_uri+"")&&E(p,U),2&e&&Z!==(Z=t[1].script_params_uri+"")&&E(b,Z),2&e&&B!==(B=t[1].start_nodes+"")&&E(Y,B),2&e&&W!==(W=t[1].affected_nodes+"")&&E(q,W)},d(t){t&&k(e)}}}function fn(t){let e,n,s,r,o,i=Object.keys(t[0]).length>0,l=Object.keys(t[1]).length>0;e=new be({props:{}}),t[6](e);let a=i&&rn(t),c=l&&un(t);return{c(){ft(e.$$.fragment),n=S(),a&&a.c(),s=S(),c&&c.c(),r=M()},m(t,i){dt(e,t,i),y(t,n,i),a&&a.m(t,i),y(t,s,i),c&&c.m(t,i),y(t,r,i),o=!0},p(t,[n]){e.$set({}),1&n&&(i=Object.keys(t[0]).length>0),i?a?a.p(t,n):(a=rn(t),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null),2&n&&(l=Object.keys(t[1]).length>0),l?c?c.p(t,n):(c=un(t),c.c(),c.m(r.parentNode,r)):c&&(c.d(1),c=null)},i(t){o||(rt(e.$$.fragment,t),o=!0)},o(t){ot(e.$$.fragment,t),o=!1},d(o){t[6](null),pt(e,o),o&&k(n),a&&a.d(o),o&&k(s),c&&c.d(o),o&&k(r)}}}function dn(t,e,n){let s,{run_lifespan:r={}}=e,{run_props:o={}}=e,{ks_name:i=""}=e;return t.$$set=t=>{"run_lifespan"in t&&n(0,r=t.run_lifespan),"run_props"in t&&n(1,o=t.run_props),"ks_name"in t&&n(5,i=t.ks_name)},[r,o,s,function(){Ht(qe,{keyspace:i,run_id:r.run_id})},function(t){return ae(t.completed_ts).valueOf()>0?(ae(t.completed_ts).valueOf()-ae(t.start_ts).valueOf())/1e3:ae(t.stopped_ts).valueOf()>0?(ae(t.stopped_ts).valueOf()-ae(t.start_ts).valueOf())/1e3:(Date.now()-ae(t.start_ts).valueOf())/1e3},i,function(t){Z[t?"unshift":"push"]((()=>{s=t,n(2,s)}))}]}class pn extends mt{constructor(t){super(),ht(this,t,dn,fn,i,{run_lifespan:0,run_props:1,ks_name:5})}}function hn(t,e,n){const s=t.slice();return s[9]=e[n],s}function mn(t){let e,n=t[9].elapsed+"";return{c(){e=x(n)},m(t,n){y(t,e,n)},p(t,s){1&s&&n!==(n=t[9].elapsed+"")&&E(e,n)},d(t){t&&k(e)}}}function gn(t){let e,n,s,r,o,i,l,a,u,f,d,p,h,m,g,$,_,b,M,T,j,L,Y,H,C,I,N,R,q,A,U,Z=ae(t[9].ts).format("MMM D, YYYY HH:mm:ss.SSS Z")+"",B=t[9].batch_idx+"",W=t[9].batches_total+"",z=t[9].first_token+"",G=t[9].last_token+"",F=t[9].instance+"",K=t[9].thread+"",P=t[9].comment+"",J=t[9].elapsed>0&&mn(t);return{c(){e=w("tr"),n=w("td"),s=x(Z),r=S(),o=w("td"),i=x(B),l=x(" / "),a=x(W),u=S(),f=w("td"),d=w("img"),m=S(),g=w("td"),J&&J.c(),$=S(),_=w("td"),b=x(z),M=S(),T=w("td"),j=x(G),L=S(),Y=w("td"),H=x(F),C=S(),I=w("td"),N=x(K),R=S(),q=w("td"),A=x(P),U=S(),D(n,"white-space","nowrap"),c(d.src,p=t[1].nodeStatusToIconStatic(t[9].status))||O(d,"src",p),O(d,"title",h=t[1].nodeStatusToText(t[9].status)),O(d,"alt",""),O(d,"class","svelte-sapx4v")},m(t,c){y(t,e,c),v(e,n),v(n,s),v(e,r),v(e,o),v(o,i),v(o,l),v(o,a),v(e,u),v(e,f),v(f,d),v(e,m),v(e,g),J&&J.m(g,null),v(e,$),v(e,_),v(_,b),v(e,M),v(e,T),v(T,j),v(e,L),v(e,Y),v(Y,H),v(e,C),v(e,I),v(I,N),v(e,R),v(e,q),v(q,A),v(e,U)},p(t,e){1&e&&Z!==(Z=ae(t[9].ts).format("MMM D, YYYY HH:mm:ss.SSS Z")+"")&&E(s,Z),1&e&&B!==(B=t[9].batch_idx+"")&&E(i,B),1&e&&W!==(W=t[9].batches_total+"")&&E(a,W),3&e&&!c(d.src,p=t[1].nodeStatusToIconStatic(t[9].status))&&O(d,"src",p),3&e&&h!==(h=t[1].nodeStatusToText(t[9].status))&&O(d,"title",h),t[9].elapsed>0?J?J.p(t,e):(J=mn(t),J.c(),J.m(g,null)):J&&(J.d(1),J=null),1&e&&z!==(z=t[9].first_token+"")&&E(b,z),1&e&&G!==(G=t[9].last_token+"")&&E(j,G),1&e&&F!==(F=t[9].instance+"")&&E(H,F),1&e&&K!==(K=t[9].thread+"")&&E(N,K),1&e&&P!==(P=t[9].comment+"")&&E(A,P)},d(t){t&&k(e),J&&J.d()}}}function $n(t){let e,n,s,r,o,i,l,a,c,u,f,d,p,h,m,g,$,_,M,T,O,j,D,L,Y,H,C,I,N,R,q,A,U,Z,B,W,z,G,F,K,P,J,V,X,Q,tt,et,nt;e=new be({props:{}}),t[8](e);let st=t[0],it=[];for(let e=0;e<st.length;e+=1)it[e]=gn(hn(t,st,e));return{c(){ft(e.$$.fragment),n=S(),s=w("table"),r=w("thead"),r.innerHTML='<th colspan="2" class="svelte-sapx4v">Node batch execution summary</th>',o=S(),i=w("tbody"),l=w("tr"),a=w("td"),c=S(),u=w("td"),f=w("table"),d=w("tbody"),p=w("tr"),h=w("td"),h.textContent="Elapsed:",m=S(),g=w("td"),$=x(t[2]),_=x("s"),M=S(),T=w("tr"),O=w("td"),O.textContent="Batches not started:",j=S(),D=w("td"),L=x(t[3]),Y=S(),H=w("tr"),C=w("td"),C.textContent="Batches started:",I=S(),N=w("td"),R=x(t[4]),q=S(),A=w("tr"),U=w("td"),U.textContent="Batches running:",Z=S(),B=w("td"),W=x(t[5]),z=S(),G=w("tr"),F=w("td"),F.textContent="Batches finished:",K=S(),P=w("td"),J=x(t[6]),V=S(),X=w("table"),Q=w("thead"),Q.innerHTML='<th class="svelte-sapx4v">Timestamp</th> \n        <th class="svelte-sapx4v">Batch</th> \n        <th class="svelte-sapx4v">Status</th> \n        <th class="svelte-sapx4v">Elapsed</th> \n        <th class="svelte-sapx4v">First token</th> \n        <th class="svelte-sapx4v">Last token</th> \n        <th class="svelte-sapx4v">Host/Instance</th> \n        <th class="svelte-sapx4v">Thread</th> \n        <th class="svelte-sapx4v">Comment</th>',tt=S(),et=w("tbody");for(let t=0;t<it.length;t+=1)it[t].c()},m(k,b){dt(e,k,b),y(k,n,b),y(k,s,b),v(s,r),v(s,o),v(s,i),v(i,l),v(l,a),a.innerHTML=t[7],v(l,c),v(l,u),v(u,f),v(f,d),v(d,p),v(p,h),v(p,m),v(p,g),v(g,$),v(g,_),v(d,M),v(d,T),v(T,O),v(T,j),v(T,D),v(D,L),v(d,Y),v(d,H),v(H,C),v(H,I),v(H,N),v(N,R),v(d,q),v(d,A),v(A,U),v(A,Z),v(A,B),v(B,W),v(d,z),v(d,G),v(G,F),v(G,K),v(G,P),v(P,J),y(k,V,b),y(k,X,b),v(X,Q),v(X,tt),v(X,et);for(let t=0;t<it.length;t+=1)it[t].m(et,null);nt=!0},p(t,[n]){if(e.$set({}),(!nt||128&n)&&(a.innerHTML=t[7]),(!nt||4&n)&&E($,t[2]),(!nt||8&n)&&E(L,t[3]),(!nt||16&n)&&E(R,t[4]),(!nt||32&n)&&E(W,t[5]),(!nt||64&n)&&E(J,t[6]),3&n){let e;for(st=t[0],e=0;e<st.length;e+=1){const s=hn(t,st,e);it[e]?it[e].p(s,n):(it[e]=gn(s),it[e].c(),it[e].m(et,null))}for(;e<it.length;e+=1)it[e].d(1);it.length=st.length}},i(t){nt||(rt(e.$$.fragment,t),nt=!0)},o(t){ot(e.$$.fragment,t),nt=!1},d(r){t[8](null),pt(e,r),r&&k(n),r&&k(s),r&&k(V),r&&k(X),b(it,r)}}}function _n(t){for(var e="",n=-1,s=0;s<t.length;s++)-1!=n?(n!=t[s]-1?(e.endsWith(n.toString())||(e+=n.toString()),e.length>0&&(e+=","),e+=t[s].toString()):e.endsWith("-")||(e+="-"),n=t[s]):(e+=t[s].toString(),n=t[s]);return e.endsWith("-")&&(e+=n.toString()),e}function vn(t,e,n){let s,{batch_history:r=[]}=e,o=0,i="",l="",a="",c="",u="";return N((()=>{if(0==r.length)return;let t=new Set,e={},s=null,f=null;for(let n=0;n<r.length;n++){let o=r[n];1===o.status&&(e[o.batch_idx]=ae(o.ts).valueOf(),(null==s||e[o.batch_idx]<s)&&(s=e[o.batch_idx]),t.add(o.batch_idx))}let d={},p={};for(let e=0;e<r.length;e++){let n=r[e];n.status>1&&!(n.batch_idx in d)&&(d[n.batch_idx]=ae(n.ts).valueOf(),(null==f||d[n.batch_idx]>f)&&(f=d[n.batch_idx]),p[n.batch_idx]=n.status,t.delete(n.batch_idx))}if(n(3,i=_n([...Array(r[0].batches_total).keys()].filter((t=>!(t in e))))),n(4,l=_n(Array.from(Object.keys(e)))),n(5,a=_n(Array.from(t).sort((function(t,e){return t-e})))),n(6,c=_n(Array.from(Object.keys(d)))),null!=s&&null!=f&&r[0].batches_total>1){let t=800,i=600,l=10;l*r[0].batches_total<i?i=l*r[0].batches_total:l=i/r[0].batches_total,n(7,u=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 ${t} ${i}" width="${t}px" height="${i}px">\n`),n(7,u+=`<rect width="${t}" height="${i}" fill="lightgray" />`),n(2,o=Math.round((f-s)/1e3));for(var h=0;h<r[0].batches_total;h++)if(h in e&&h in d){let r=(e[h]-s)/(f-s)*t,o=h*l,i=(d[h]-s)/(f-s)*t,a=(h+1)*l;n(7,u+=`<path d="M${r},${o} L${i},${o} L${i},${a} L${r},${a} Z" fill="${ue(p[h])}" ><title>Batch ${h} ${Math.ceil((d[h]-e[h])/1e3).toString()}s</title></path>`)}n(7,u+="</svg>")}for(let t=0;t<r.length;t++){let s=r[t];s.batch_idx in e&&(s.batch_idx in d?n(0,r[t].elapsed=(d[s.batch_idx]-e[s.batch_idx])/1e3,r):n(0,r[t].elapsed=(Date.now()-e[s.batch_idx])/1e3,r))}})),t.$$set=t=>{"batch_history"in t&&n(0,r=t.batch_history)},[r,s,o,i,l,a,c,u,function(t){Z[t?"unshift":"push"]((()=>{s=t,n(1,s)}))}]}class yn extends mt{constructor(t){super(),ht(this,t,vn,$n,i,{batch_history:0})}}function kn(t){let e,n,s,r,o,i,l,a,c,u,f,d,p,h,m,g;function $(e){t[6](e)}e=new be({props:{}}),t[5](e);let _={};function b(e){t[7](e)}function M(e){t[8](e)}function T(e){t[9](e)}void 0!==t[2]&&(_.pathElements=t[2]),s=new oe({props:_}),Z.push((()=>ut(s,"pathElements",$)));let O={};function j(e){t[10](e)}void 0!==t[3].run_lifespan&&(O.run_lifespan=t[3].run_lifespan),void 0!==t[3].run_props&&(O.run_props=t[3].run_props),void 0!==t[0].ks_name&&(O.ks_name=t[0].ks_name),c=new pn({props:O}),Z.push((()=>ut(c,"run_lifespan",b))),Z.push((()=>ut(c,"run_props",M))),Z.push((()=>ut(c,"ks_name",T)));let L={};return void 0!==t[3].batch_history&&(L.batch_history=t[3].batch_history),h=new yn({props:L}),Z.push((()=>ut(h,"batch_history",j))),{c(){ft(e.$$.fragment),n=S(),ft(s.$$.fragment),o=S(),i=w("p"),l=x(t[4]),a=S(),ft(c.$$.fragment),p=S(),ft(h.$$.fragment),D(i,"color","red")},m(t,r){dt(e,t,r),y(t,n,r),dt(s,t,r),y(t,o,r),y(t,i,r),v(i,l),y(t,a,r),dt(c,t,r),y(t,p,r),dt(h,t,r),g=!0},p(t,[n]){e.$set({});const o={};!r&&4&n&&(r=!0,o.pathElements=t[2],P((()=>r=!1))),s.$set(o),(!g||16&n)&&E(l,t[4]);const i={};!u&&8&n&&(u=!0,i.run_lifespan=t[3].run_lifespan,P((()=>u=!1))),!f&&8&n&&(f=!0,i.run_props=t[3].run_props,P((()=>f=!1))),!d&&1&n&&(d=!0,i.ks_name=t[0].ks_name,P((()=>d=!1))),c.$set(i);const a={};!m&&8&n&&(m=!0,a.batch_history=t[3].batch_history,P((()=>m=!1))),h.$set(a)},i(t){g||(rt(e.$$.fragment,t),rt(s.$$.fragment,t),rt(c.$$.fragment,t),rt(h.$$.fragment,t),g=!0)},o(t){ot(e.$$.fragment,t),ot(s.$$.fragment,t),ot(c.$$.fragment,t),ot(h.$$.fragment,t),g=!1},d(r){t[5](null),pt(e,r),r&&k(n),pt(s,r),r&&k(o),r&&k(i),r&&k(a),pt(c,r),r&&k(p),pt(h,r)}}}function bn(t,e,n){let s,{params:r}=e,o=[],i={run_props:{},run_lifespan:{},batch_history:[]},l="";function a(t,e){n(3,i=t||{run_props:{},run_lifespan:{},batch_history:[]}),n(4,l=e?e.msg:"")}var c;let u=!1;function f(){let t="http://localhost:6543/ks/"+r.ks_name+"/run/"+r.run_id+"/node/"+r.node_name+"/batch_history";fetch(new Request(t,{method:"GET"})).then((t=>t.json())).then((t=>{ce(t,a),u||(c=i.run_lifespan.final_status>1?setTimeout(f,3e3):setTimeout(f,500))})).catch((e=>{n(4,l="GET "+t+":"+e),console.log(e),u||(c=setTimeout(f,3e3))}))}return I((async()=>{n(2,o=[{title:"Keyspaces",link:s.rootLink()},{title:r.ks_name,link:s.ksMatrixLink(r.ks_name)},{title:"Batch history: run "+r.run_id+", node "+r.node_name}]),f()})),R((async()=>{u=!0,c&&clearTimeout(c)})),t.$$set=t=>{"params"in t&&n(0,r=t.params)},[r,s,o,i,l,function(t){Z[t?"unshift":"push"]((()=>{s=t,n(1,s)}))},function(t){o=t,n(2,o)},function(e){t.$$.not_equal(i.run_lifespan,e)&&(i.run_lifespan=e,n(3,i))},function(e){t.$$.not_equal(i.run_props,e)&&(i.run_props=e,n(3,i))},function(e){t.$$.not_equal(r.ks_name,e)&&(r.ks_name=e,n(0,r))},function(e){t.$$.not_equal(i.batch_history,e)&&(i.batch_history=e,n(3,i))}]}class wn extends mt{constructor(t){super(),ht(this,t,bn,kn,i,{params:0})}}function xn(t,e,n){const s=t.slice();return s[5]=e[n],s}function Sn(t){let e,n=t[5].elapsed+"";return{c(){e=x(n)},m(t,n){y(t,e,n)},p(t,s){1&s&&n!==(n=t[5].elapsed+"")&&E(e,n)},d(t){t&&k(e)}}}function Mn(t){let e,n,s,r,o,i,l,a,u,f,d,p,h,m,g,$,_,b,M,T=ae(t[5].ts).format("MMM D, YYYY HH:mm:ss.SSS Z")+"",j=t[5].script_node+"",L=t[5].comment+"",Y=t[5].elapsed>0&&Sn(t);return{c(){e=w("tr"),n=w("td"),s=x(T),r=S(),o=w("td"),i=w("a"),l=x(j),u=S(),f=w("td"),d=w("img"),m=S(),g=w("td"),Y&&Y.c(),$=S(),_=w("td"),b=x(L),M=S(),D(n,"white-space","nowrap"),O(i,"href",a=t[2].ksRunNodeBatchHistoryLink(t[1],t[5].run_id,t[5].script_node)),c(d.src,p=t[2].nodeStatusToIconStatic(t[5].status))||O(d,"src",p),O(d,"title",h=t[2].nodeStatusToText(t[5].status)),O(d,"alt",""),O(d,"class","svelte-e6qy6p")},m(t,a){y(t,e,a),v(e,n),v(n,s),v(e,r),v(e,o),v(o,i),v(i,l),v(e,u),v(e,f),v(f,d),v(e,m),v(e,g),Y&&Y.m(g,null),v(e,$),v(e,_),v(_,b),v(e,M)},p(t,e){1&e&&T!==(T=ae(t[5].ts).format("MMM D, YYYY HH:mm:ss.SSS Z")+"")&&E(s,T),1&e&&j!==(j=t[5].script_node+"")&&E(l,j),7&e&&a!==(a=t[2].ksRunNodeBatchHistoryLink(t[1],t[5].run_id,t[5].script_node))&&O(i,"href",a),5&e&&!c(d.src,p=t[2].nodeStatusToIconStatic(t[5].status))&&O(d,"src",p),5&e&&h!==(h=t[2].nodeStatusToText(t[5].status))&&O(d,"title",h),t[5].elapsed>0?Y?Y.p(t,e):(Y=Sn(t),Y.c(),Y.m(g,null)):Y&&(Y.d(1),Y=null),1&e&&L!==(L=t[5].comment+"")&&E(b,L)},d(t){t&&k(e),Y&&Y.d()}}}function Tn(t){let e,n,s,r,o,i,l,a,c;e=new be({props:{}}),t[4](e);let u=t[0],f=[];for(let e=0;e<u.length;e+=1)f[e]=Mn(xn(t,u,e));return{c(){ft(e.$$.fragment),n=S(),s=new L(!1),r=S(),o=w("table"),i=w("thead"),i.innerHTML='<th class="svelte-e6qy6p">Timestamp</th> \n        <th class="svelte-e6qy6p">Node</th> \n        <th class="svelte-e6qy6p">Status</th> \n        <th class="svelte-e6qy6p">Elapsed</th> \n        <th class="svelte-e6qy6p">Comment</th>',l=S(),a=w("tbody");for(let t=0;t<f.length;t+=1)f[t].c();s.a=r},m(u,d){dt(e,u,d),y(u,n,d),s.m(t[3],u,d),y(u,r,d),y(u,o,d),v(o,i),v(o,l),v(o,a);for(let t=0;t<f.length;t+=1)f[t].m(a,null);c=!0},p(t,[n]){if(e.$set({}),(!c||8&n)&&s.p(t[3]),7&n){let e;for(u=t[0],e=0;e<u.length;e+=1){const s=xn(t,u,e);f[e]?f[e].p(s,n):(f[e]=Mn(s),f[e].c(),f[e].m(a,null))}for(;e<f.length;e+=1)f[e].d(1);f.length=u.length}},i(t){c||(rt(e.$$.fragment,t),c=!0)},o(t){ot(e.$$.fragment,t),c=!1},d(i){t[4](null),pt(e,i),i&&k(n),i&&s.d(),i&&k(r),i&&k(o),b(f,i)}}}function On(t,e,n){let s,{node_history:r=[]}=e,{ks_name:o=""}=e,i="";return N((()=>{let t=null,e=null,s={};for(let e=0;e<r.length;e++){let n=r[e];1===n.status&&(s[n.script_node]=ae(n.ts).valueOf(),(null==t||s[n.script_node]<t)&&(t=s[n.script_node]))}let o={},l={};for(let t=0;t<r.length;t++){let n=r[t];n.status>1&&!(n.script_node in o)&&(o[n.script_node]=ae(n.ts).valueOf(),(null==e||o[n.script_node]>e)&&(e=o[n.script_node]),l[n.script_node]=n.status)}let a=Object.keys(s).length;if(null!=t&&null!=e&&a>1){let r=800,u=600,f=10;f*a<u?u=f*a:f=u/a,n(3,i=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 ${r} ${u}" width="${r}px" height="${u}px">\n`),n(3,i+=`<rect width="${r}" height="${u}" fill="lightgray" />`);let d=0;for(var c in s)if(c in o){let a=(s[c]-t)/(e-t)*r,u=d*f,p=(o[c]-t)/(e-t)*r,h=(d+1)*f;n(3,i+=`<path d="M${a},${u} L${p},${u} L${p},${h} L${a},${h} Z" fill="${ue(l[c])}" ><title>${c} ${Math.ceil((o[c]-s[c])/1e3).toString()}s</title></path>`),d++}n(3,i+="</svg>")}for(let t=0;t<r.length;t++){let e=r[t];e.script_node in s&&(e.script_node in o?n(0,r[t].elapsed=(o[e.script_node]-s[e.script_node])/1e3,r):n(0,r[t].elapsed=(Date.now()-s[e.script_node])/1e3,r))}})),t.$$set=t=>{"node_history"in t&&n(0,r=t.node_history),"ks_name"in t&&n(1,o=t.ks_name)},[r,o,s,i,function(t){Z[t?"unshift":"push"]((()=>{s=t,n(2,s)}))}]}class En extends mt{constructor(t){super(),ht(this,t,On,Tn,i,{node_history:0,ks_name:1})}}function jn(t){let e,n,s,r,o,i,l,a,c,u,f,d,p,h,m,g,$;function _(e){t[6](e)}e=new be({props:{}}),t[5](e);let b={};function M(e){t[7](e)}function T(e){t[8](e)}function O(e){t[9](e)}void 0!==t[2]&&(b.pathElements=t[2]),s=new oe({props:b}),Z.push((()=>ut(s,"pathElements",_)));let j={};function L(e){t[10](e)}function Y(e){t[11](e)}void 0!==t[3].run_lifespan&&(j.run_lifespan=t[3].run_lifespan),void 0!==t[3].run_props&&(j.run_props=t[3].run_props),void 0!==t[0].ks_name&&(j.ks_name=t[0].ks_name),c=new pn({props:j}),Z.push((()=>ut(c,"run_lifespan",M))),Z.push((()=>ut(c,"run_props",T))),Z.push((()=>ut(c,"ks_name",O)));let H={};return void 0!==t[3].node_history&&(H.node_history=t[3].node_history),void 0!==t[0].ks_name&&(H.ks_name=t[0].ks_name),h=new En({props:H}),Z.push((()=>ut(h,"node_history",L))),Z.push((()=>ut(h,"ks_name",Y))),{c(){ft(e.$$.fragment),n=S(),ft(s.$$.fragment),o=S(),i=w("p"),l=x(t[4]),a=S(),ft(c.$$.fragment),p=S(),ft(h.$$.fragment),D(i,"color","red")},m(t,r){dt(e,t,r),y(t,n,r),dt(s,t,r),y(t,o,r),y(t,i,r),v(i,l),y(t,a,r),dt(c,t,r),y(t,p,r),dt(h,t,r),$=!0},p(t,[n]){e.$set({});const o={};!r&&4&n&&(r=!0,o.pathElements=t[2],P((()=>r=!1))),s.$set(o),(!$||16&n)&&E(l,t[4]);const i={};!u&&8&n&&(u=!0,i.run_lifespan=t[3].run_lifespan,P((()=>u=!1))),!f&&8&n&&(f=!0,i.run_props=t[3].run_props,P((()=>f=!1))),!d&&1&n&&(d=!0,i.ks_name=t[0].ks_name,P((()=>d=!1))),c.$set(i);const a={};!m&&8&n&&(m=!0,a.node_history=t[3].node_history,P((()=>m=!1))),!g&&1&n&&(g=!0,a.ks_name=t[0].ks_name,P((()=>g=!1))),h.$set(a)},i(t){$||(rt(e.$$.fragment,t),rt(s.$$.fragment,t),rt(c.$$.fragment,t),rt(h.$$.fragment,t),$=!0)},o(t){ot(e.$$.fragment,t),ot(s.$$.fragment,t),ot(c.$$.fragment,t),ot(h.$$.fragment,t),$=!1},d(r){t[5](null),pt(e,r),r&&k(n),pt(s,r),r&&k(o),r&&k(i),r&&k(a),pt(c,r),r&&k(p),pt(h,r)}}}function Dn(t,e,n){let s,{params:r}=e,o=[],i={run_props:{},run_lifespan:{},node_history:[]},l="";function a(t,e){n(3,i=t||{run_props:{},run_lifespan:{},node_history:[]}),n(4,l=e?e.msg:"")}var c;let u=!1;function f(){let t="http://localhost:6543/ks/"+r.ks_name+"/run/"+r.run_id+"/node_history";fetch(new Request(t,{method:"GET"})).then((t=>t.json())).then((t=>{ce(t,a),u||(c=i.run_lifespan.final_status>1?setTimeout(f,3e3):setTimeout(f,500))})).catch((e=>{n(4,l="GET "+t+":"+e),console.log(e),c=setTimeout(f,3e3)}))}return I((async()=>{n(2,o=[{title:"Keyspaces",link:s.rootLink()},{title:r.ks_name,link:s.ksMatrixLink(r.ks_name)},{title:"Node history: run "+r.run_id}]),f()})),R((async()=>{u=!0,c&&clearTimeout(c)})),t.$$set=t=>{"params"in t&&n(0,r=t.params)},[r,s,o,i,l,function(t){Z[t?"unshift":"push"]((()=>{s=t,n(1,s)}))},function(t){o=t,n(2,o)},function(e){t.$$.not_equal(i.run_lifespan,e)&&(i.run_lifespan=e,n(3,i))},function(e){t.$$.not_equal(i.run_props,e)&&(i.run_props=e,n(3,i))},function(e){t.$$.not_equal(r.ks_name,e)&&(r.ks_name=e,n(0,r))},function(e){t.$$.not_equal(i.node_history,e)&&(i.node_history=e,n(3,i))},function(e){t.$$.not_equal(r.ks_name,e)&&(r.ks_name=e,n(0,r))}]}class Ln extends mt{constructor(t){super(),ht(this,t,Dn,jn,i,{params:0})}}function Yn(e){let n,s,o;return{c(){n=w("div"),O(n,"slot","backdrop"),O(n,"class","backdrop svelte-2b4lvm")},m(t,e){y(t,n,e),s||(o=[T(n,"click",Yt),T(n,"keypress",Cn)],s=!0)},p:t,d(t){t&&k(n),s=!1,r(o)}}}function Hn(t){let e,n,s,r;return e=new Tt({props:{routes:{"/":He,"/ks/:ks_name/matrix":sn,"/ks/:ks_name/run/:run_id/node/:node_name/batch_history":wn,"/ks/:ks_name/run/:run_id/node_history":Ln}}}),s=new Vt({props:{$$slots:{backdrop:[Yn]},$$scope:{ctx:t}}}),{c(){ft(e.$$.fragment),n=S(),ft(s.$$.fragment)},m(t,o){dt(e,t,o),y(t,n,o),dt(s,t,o),r=!0},p(t,[e]){const n={};1&e&&(n.$$scope={dirty:e,ctx:t}),s.$set(n)},i(t){r||(rt(e.$$.fragment,t),rt(s.$$.fragment,t),r=!0)},o(t){ot(e.$$.fragment,t),ot(s.$$.fragment,t),r=!1},d(t){pt(e,t),t&&k(n),pt(s,t)}}}const Cn=()=>!1;return new class extends mt{constructor(t){super(),ht(this,t,null,Hn,i,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
